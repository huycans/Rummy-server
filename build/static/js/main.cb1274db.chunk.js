(this["webpackJsonprummy-client"]=this["webpackJsonprummy-client"]||[]).push([[0],{24:function(e,t,a){e.exports=a(38)},29:function(e,t,a){},31:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(22),i=a.n(s),c=(a(29),a(4)),o=a.n(c),l=a(7),d=a(8),u=a(9),h=a(2),m=a(10),f=a(12),p=a(15),g=r.a.createContext(),v=function(e){Object(f.a)(a,e);var t=Object(m.a)(a);function a(e){return Object(d.a)(this,a),t.call(this,e)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement(g.Provider,{value:Object(p.a)({},this.props.value)},this.props.children)}}]),a}(n.Component),b=g.Consumer,w=(a(31),a(32),a(11)),k=function(e){var t=e.handleInputUsername,a=e.handleInputPassword,n=e.username,s=e.password,i=e.signin,c=function(e){e.preventDefault(),i()};return r.a.createElement(b,null,(function(e){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("h1",null,"Welcome to Rummy")),r.a.createElement("div",{className:"row"},r.a.createElement("h2",null,"Signin")),r.a.createElement("div",{className:"row"},r.a.createElement("form",null,r.a.createElement("div",{className:"row w-100"},r.a.createElement("label",{htmlFor:"username"},"Username: \xa0",r.a.createElement("input",{maxLength:50,type:"text",name:"username",value:n,onChange:t})),r.a.createElement("br",null)),r.a.createElement("div",{className:"row w-100"},r.a.createElement("label",{htmlFor:"username"},"Password: \xa0",r.a.createElement("input",{maxLength:50,type:"password",name:"password",value:s,onChange:a})),r.a.createElement("br",null)),r.a.createElement("div",{className:"row"},r.a.createElement("input",{type:"submit",value:"Signin",onClick:c})))),r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h4",null,"Don't have an account yet?"),r.a.createElement(w.b,{to:"/signup"},"Click here")))}))},y=function(e){var t=e.handleInputUsername,a=e.handleInputPassword,n=e.username,s=e.password,i=e.signup,c=function(e){e.preventDefault(),i()};return r.a.createElement(b,null,(function(e){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("h1",null,"Welcome to Rummy")),r.a.createElement("div",{className:"row"},r.a.createElement("h2",null,"Signup")),r.a.createElement("div",{className:"row"},r.a.createElement("form",null,r.a.createElement("div",{className:"row w-100"},r.a.createElement("label",{htmlFor:"username"},"Username: \xa0",r.a.createElement("input",{minLength:3,maxLength:50,type:"text",name:"username",value:n,onChange:t})),r.a.createElement("br",null)),r.a.createElement("div",{className:"row w-100"},r.a.createElement("label",{htmlFor:"username"},"Password: \xa0",r.a.createElement("input",{minLength:5,maxLength:50,type:"password",name:"password",value:s,onChange:a})),r.a.createElement("br",null)),r.a.createElement("div",{className:"row"},r.a.createElement("input",{type:"submit",value:"Signup",onClick:c})))),r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h4",null,"Already have an account?"),r.a.createElement(w.b,{to:"/"},"Click here")))}))},S=a(1),C=function(e){var t=e.isSignedIn,a=e.type;return"guest"===a&&t?r.a.createElement(S.a,{to:"/game"}):"private"!==a||t?r.a.createElement(S.b,e):r.a.createElement(S.a,{to:"/"})},E=a(14),j=a(3),x=a.n(j),O=function(){var e={cardSize:{width:69,height:94,padding:18},animationSpeed:100,table:"body",cardback:"red",acesHigh:!1,cardsUrl:"img/cards.png",blackJoker:!1,redJoker:!1,type:0,loop:1},t=1,a=[],n=1,r=n+12;function s(e){var t=x()(this).data("card");if(t.container){var a=t.container._click;a&&a.func.call(a.context||window,t,e)}}function i(e){var t=e.length;if(0!=t)for(;--t;){var a=Math.floor(Math.random()*(t+1)),n=e[t],r=e[a];e[t]=r,e[a]=n}}function c(e,t,a){this.init(e,t,a)}function o(){}function l(e){this.init(e)}function d(e){this.init(e)}function u(e){this.init(e)}return c.prototype={init:function(t,a,n){this.shortName=t+a,this.suit=t,this.rank=a,this.name=t.toUpperCase()+a,this.faceUp=!1,this.el=x()("<div/>").css({width:e.cardSize.width,height:e.cardSize.height,"background-image":"url("+e.cardsUrl+")",position:"absolute",cursor:"pointer"}).addClass("card").data("card",this).appendTo(x()(n)),this.showCard(),this.moveToFront()},resize:function(t){switch(t){case"small":x()(this.el).css({width:20,height:47});break;case"default":x()(this.el).css({width:e.cardSize.width,height:e.cardSize.height})}},toString:function(){return this.name},moveTo:function(t,a,n,r){var s={top:a-e.cardSize.height/2,left:t-e.cardSize.width/2};x()(this.el).animate(s,n||e.animationSpeed,r)},rotate:function(e){x()(this.el).css("-webkit-transform","rotate("+e+"deg)").css("-moz-transform","rotate("+e+"deg)").css("-ms-transform","rotate("+e+"deg)").css("transform","rotate("+e+"deg)").css("-o-transform","rotate("+e+"deg)")},showCard:function(){var t,a,n=this.rank;14==n&&(n=1),t=-n*e.cardSize.width,a=-{c:0,d:1,h:2,s:3,rj:2,bj:3}[this.suit]*e.cardSize.height,this.rotate(0),x()(this.el).css("background-position",t+"px "+a+"px")},hideCard:function(t){var a="red"==e.cardback?0*e.cardSize.height:-1*e.cardSize.height;x()(this.el).css("background-position","0px "+a+"px"),this.rotate(0)},moveToFront:function(){x()(this.el).css("z-index",t++)}},o.prototype=new Array,o.prototype.extend=function(e){for(var t in e)this[t]=e[t]},o.prototype.extend({addCard:function(e){this.addCards([e])},addCards:function(e){for(var t=0;t<e.length;t++){var a=e[t];a.container&&a.container.removeCard(a),this.push(a),a.container=this}},removeCard:function(e){for(var t=0;t<this.length;t++)if(this[t]==e)return this.splice(t,1),!0;return!1},init:function(t){t=t||{},this.x=t.x||x()(e.table).width()/2,this.y=t.y||x()(e.table).height()/2,this.faceUp=t.faceUp},click:function(e,t){this._click={func:e,context:t}},mousedown:function(e,t){this._mousedown={func:e,context:t}},mouseup:function(e,t){this._mouseup={func:e,context:t}},render:function(a){var n=(a=a||{}).speed||e.animationSpeed;this.calcPosition(a);for(var r=0;r<this.length;r++){var s=this[r];t++,s.moveToFront();var i=parseInt(x()(s.el).css("top")),c=parseInt(x()(s.el).css("left"));if(i!=s.targetTop||c!=s.targetLeft){var o={top:s.targetTop,left:s.targetLeft,queue:!1};a.immediate?x()(s.el).css(o):x()(s.el).animate(o,n)}}var l=this,d=function(){for(var e=0;e<l.length;e++)l.faceUp?l[e].showCard():l[e].hideCard()};a.immediate?d():setTimeout(d,n/2),a.callback&&setTimeout(a.callback,n)},topCard:function(){return this[this.length-1]},toString:function(){return"Container"}}),l.prototype=new o,l.prototype.extend({calcPosition:function(t){t=t||{};for(var a=Math.round(this.x-e.cardSize.width/2,0),n=Math.round(this.y-e.cardSize.height/2,0),r=0;r<this.length;r++)r>0&&r%6==0&&(n-=1,a-=1),this[r].targetTop=n,this[r].targetLeft=a},toString:function(){return"Deck"},deal:function(e,t,a,n){var r=this,s=0,i=e*t.length;!function e(){0!=r.length&&s!=i?(t[s%t.length].addCard(r.topCard()),t[s%t.length].render({callback:e,speed:a}),s++):n&&n()}()}}),d.prototype=new o,d.prototype.extend({calcPosition:function(t){t=t||{};for(var a=e.cardSize.width+(this.length-1)*e.cardSize.padding,n=Math.round(this.x-a/2),r=Math.round(this.y-e.cardSize.height/2,0),s=0;s<this.length;s++)this[s].targetTop=r,this[s].targetLeft=n+s*e.cardSize.padding},resize:function(e){switch(e){case"small":this.forEach((function(e,t){e.resize("small")}));break;case"default":this.forEach((function(e,t){e.resize("default")}))}},sort:function(){for(var e=0;e<this.length-1;e++)for(var t=0;t<this.length-e-1;t++)if(this[t].suit<this[t+1].suit||this[t].suit==this[t+1].suit&&this[t].rank<this[t+1].rank){var a=this[t];this[t]=this[t+1],this[t+1]=a}},toString:function(){return"Hand"}}),u.prototype=new o,u.prototype.extend({calcPosition:function(e){e=e||{}},toString:function(){return"Pile"},deal:function(e,t){this.dealCounter||(this.dealCounter=e*t.length)}}),{init:function(t){if(t)for(var o in t)e.hasOwnProperty(o)&&(e[o]=t[o]);e.acesHigh=!1,n=e.acesHigh?2:1,r=n+12,e.table=x()(e.table)[0],"static"==x()(e.table).css("position")&&x()(e.table).css("position","relative");for(var l=0;l<e.loop;l++)for(o=n;o<=r;o++)a.push(new c("c",o,e.table)),a.push(new c("d",o,e.table)),a.push(new c("h",o,e.table)),a.push(new c("s",o,e.table));e.blackJoker&&a.push(new c("bj",0,e.table)),e.redJoker&&a.push(new c("rj",0,e.table)),x()(".card").on("click",s),i(a)},all:a,options:e,SIZE:e.cardSize,Card:c,Container:o,Deck:l,Hand:d,Pile:u,shuffle:i}};function M(e){return D.apply(this,arguments)}function D(){return(D=Object(l.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://localhost:3000/join/"+t,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*"}});case 3:return a=e.sent,e.next=6,a.json();case 6:if(n=e.sent,500!=a.status){e.next=9;break}throw n.message;case 9:return e.abrupt("return",n);case 12:throw e.prev=12,e.t0=e.catch(0),e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}var L=function(e){var t=JSON.parse(e.data);console.log("data from server",t),"cards"===t.cmd?this.dealing(t):"click"==t.cmd||"draw"==t.cmd||"discard"==t.cmd||"newmeld"==t.cmd||"addmeld"==t.cmd||"ping"==t.cmd||"exit"==t.cmd||"win"==t.cmd||t.cmd},P=function(e){Object(f.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={isMelding:!1,isLayingoff:!1,isWaiting:!1,isDrawing:!1,isDiscarding:!1,hasDrawn:!1,hasDiscarded:!1,cards:null,tableName:null,deck:null,lowerhand:null,upperhand:null,discardPile:null,meldPile:null,currentMeld:null,currentSelectedCardHand:null,currentSelectedCardDeck:null,currentSelectedCardDiscard:null,currentSelectedMeld:null,code:"",token:""},n.handRef=r.a.createRef(),n.startGame=n.startGame.bind(Object(h.a)(n)),n.handleMeld=n.handleMeld.bind(Object(h.a)(n)),n.handleLayoff=n.handleLayoff.bind(Object(h.a)(n)),n.cancelMeldOrLayoff=n.cancelMeldOrLayoff.bind(Object(h.a)(n)),n.dealing=n.dealing.bind(Object(h.a)(n)),n.sortHand=n.sortHand.bind(Object(h.a)(n)),n.draw=n.draw.bind(Object(h.a)(n)),n.discard=n.discard.bind(Object(h.a)(n)),n.setGameState=n.setGameState.bind(Object(h.a)(n)),n.joinGameWithCode=n.joinGameWithCode.bind(Object(h.a)(n)),n.sendWSData=n.sendWSData.bind(Object(h.a)(n)),n.gameHandler=L.bind(Object(h.a)(n)),n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.websocket;t.onopen=function(e){console.log("Connected to server.")};var a=O();a.init({table:"#card-table"}),this.setState({cards:a,tableName:"#card-table"}),t.onmessage=function(t){e.gameHandler(t)},window.addEventListener("beforeunload",(function(){t&&t.close()}))}},{key:"sendWSData",value:function(e){var t=this.props.websocket,a=this.state,n=a.code,r=a.token;e.lobby=n,e.token=r,t.send(JSON.stringify(e))}},{key:"joinGameWithCode",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a,n,r=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"12345678979",e.prev=1,e.next=4,M(t);case 4:a=e.sent,n=a.token,console.log(n),this.setState({code:t,token:n}),this.sendWSData({cmd:"join"}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.log("An error occurs when trying to join: ",e.t0),this.props.setErrorMessage("An error occurs when trying to join "+e.t0);case 15:case"end":return e.stop()}}),e,this,[[1,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"discard",value:function(){var e=this.state,t=e.currentSelectedCardHand,a=e.isDiscarding,n=e.lowerhand,r=e.discardPile;a&&(n.removeCard(t),r.addCard(t),r.render(),n.render(),this.setGameState("isWaiting",{hasDiscarded:!0,currentSelectedCardHand:null}))}},{key:"setGameState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;this.setState(Object(p.a)({isMelding:"isMelding"==e,isLayingoff:"isLayingoff"==e,isWaiting:"isWaiting"==e,isDrawing:"isDrawing"==e,isDiscarding:"isDiscarding"==e},t),a)}},{key:"draw",value:function(){var e=this.state,t=e.isDrawing,a=e.deck,n=e.discardPile,r=e.lowerhand,s=e.currentSelectedCardDeck,i=e.currentSelectedCardDiscard;t&&(null!=s?(r.addCard(a.topCard()),r.render(),this.setGameState("isDiscarding",{currentSelectedCardDeck:null,currentSelectedCardDiscard:null,hasDrawn:!0})):null!=i&&(r.addCard(n.topCard()),r.render(),this.setGameState("isDiscarding",{currentSelectedCardDeck:null,currentSelectedCardDiscard:null,hasDrawn:!0})))}},{key:"cancelMeldOrLayoff",value:function(){var e=this.state,t=e.currentMeld,a=e.lowerhand,n=e.isMelding,r=e.isLayingoff;if(n||r){for(var s=t.length,i=0;i<s;i++){var c=t.pop();a.addCard(c),t.removeCard(c),a.render(),t.render()}this.setGameState("isDiscarding",{currentSelectedCardHand:null})}}},{key:"sortHand",value:function(){var e=this.state.lowerhand;e.sort(),e.render()}},{key:"startGame",value:function(e){e&&(e.stopPropagation(),e.preventDefault()),this.props.startingGame(),console.log("Stating game");var t=this.state.cards,a=new t.Deck;a.x-=50,a.addCards(t.all),a.render({immediate:!0});var n=new t.Hand({faceUp:!0,y:340}),r=new t.Hand({faceUp:!1,y:60}),s=new t.Deck({faceUp:!0});s.x+=50;var i=new t.Hand({faceUp:!0,x:a.x+20,y:a.y+20}),c=this;n.click((function(e){c.state.isMelding&&c.setState({currentSelectedCardHand:e},(function(){return c.handleMeld()})),c.state.isDiscarding&&c.setState({currentSelectedCardHand:e},(function(){return c.discard()})),c.state.isLayingoff&&c.setState({currentSelectedCardHand:e},(function(){return c.handleLayoff()}))})),a.click((function(e){c.state.isDrawing&&c.setState({currentSelectedCardDeck:e},(function(){return c.draw()}))})),s.click((function(e){c.state.isDrawing&&c.setState({currentSelectedCardDiscard:e},(function(){return c.draw()}))})),this.setState({cards:t,deck:a,lowerhand:n,upperhand:r,discardPile:s,meldPile:[],currentMeld:i}),this.joinGameWithCode("12131313")}},{key:"dealing",value:function(e){var t=this;console.log("dealing");var a=this.state,n=a.cards,r=a.discardPile,s=a.deck,i=a.lowerhand,c=a.upperhand,o=a.meldPile;x()("#deal").hide();var l,d=Object(E.a)(e.cards);try{var u=function(){var e=l.value,t=n.all.find((function(t,a){return t.suit==e.suit&&t.rank==e.rank}));i.addCard(t)};for(d.s();!(l=d.n()).done;)u()}catch(b){d.e(b)}finally{d.f()}var h,m=Object(E.a)(e.discardPile);try{var f=function(){var e=h.value;r.addCard(n.all.find((function(t,a){return t.suit==e.suit&&t.rank==e.rank})))};for(m.s();!(h=m.n()).done;)f()}catch(b){m.e(b)}finally{m.f()}s.deal(e.opcards,[c],100);var p,g=Object(E.a)(e.melds);try{var v=function(){var e,a=p.value,r=[],s=Object(E.a)(a);try{var i=function(){var t=e.value,a=n.all.find((function(e,a){return e.suit==t.suit&&e.rank==t.rank}));r.push(a)};for(s.s();!(e=s.n()).done;)i()}catch(b){s.e(b)}finally{s.f()}for(var c=new n.Hand({faceUp:!0,y:1}),l=r.length,d=0;d<l;d++){var u=r.pop();c.addCard(u)}c.x=c.x-230,c.y=c.y+250*(o.length+1)/5;var h=t;c.click((function(e){h.state.isLayingoff&&h.setState({currentSelectedMeld:c},(function(){return h.handleLayoff()}))})),o.push(c),c.resize("small"),c.render()};for(g.s();!(p=g.n()).done;)v()}catch(b){g.e(b)}finally{g.f()}s.render(),r.render(),i.render(),c.render(),this.setGameState("isDrawing",null,(function(){return t.draw()}))}},{key:"handleLayoff",value:function(){var e=this,t=this.state,a=t.isLayingoff,n=t.currentMeld,r=t.lowerhand,s=t.currentSelectedCardHand,i=t.currentSelectedMeld;if(a)if(0===n.length)n.addCard(s),r.removeCard(s),n.sort(),r.render(),n.render();else if(1===n.length&&null!=i){var c=n[0];if(i[0].suit===c.suit&&i[0].rank-1===c.rank||i[i.length-1].suit===c.suit&&i[i.length-1].rank+1===c.rank){var o=n.pop();i.addCard(o),n.removeCard(o),i.resize("small"),i.render(),n.render(),this.setState({currentSelectedCardHand:null,currentSelectedMeld:null},(function(){return setTimeout((function(){return e.setGameState("isDiscarding")}),500)}))}else alert("Cannot layoff this card into this meld")}}},{key:"handleMeld",value:function(){var e=this,t=!1,a=this.state,n=a.cards,r=a.lowerhand,s=a.currentMeld,i=a.meldPile,c=this.state.currentSelectedCardHand;if(s.length<2)s.addCard(c),r.removeCard(c),s.sort(),r.render(),s.render();else if(2==s.length){if(s.addCard(c),r.removeCard(c),s.sort(),s[0].suit==s[1].suit&&s[1].suit==s[2].suit?1==Math.abs(s[0].rank-s[1].rank)&&1==Math.abs(s[1].rank-s[2].rank)&&(t=!0):s[0].rank==s[1].rank&&s[1].rank==s[2].rank&&(t=!0),t){for(var o=new n.Hand({faceUp:!0,y:1}),l=s.length,d=0;d<l;d++){var u=s.pop();o.addCard(u),s.removeCard(u)}o.x=o.x-230,o.y=o.y+250*(i.length+1)/5;var h=this;o.click((function(e){h.state.isLayingoff&&h.setState({currentSelectedMeld:o},(function(){return h.handleLayoff()}))})),i.push(o),o.resize("small"),o.render(),s.render(),this.setState({currentSelectedCardHand:null},(function(){return setTimeout((function(){return e.setGameState("isDiscarding")}),500)}))}else alert("meld not valid");r.render(),s.render()}}},{key:"render",value:function(){var e=this,t=this.props.hasGameStarted,a=this.state,n=a.isMelding,s=a.hasDiscarded,i=a.hasDrawn,c=a.isWaiting,o=a.isLayingoff,l=function(){return!!c||(!(!n&&!o)||!(i&&!s))};this.handRef;return r.a.createElement("div",null,r.a.createElement("p",null,"Welcome to the game"),r.a.createElement("button",{id:"start-btn",style:{display:t?"none":"inline"},onClick:this.startGame},"Start the game"),r.a.createElement("div",{id:"card-table"},r.a.createElement("button",{style:{display:t?"block":"none"},id:"deal",onClick:this.dealing},"DEAL"),r.a.createElement("button",{disabled:l(),style:{display:t?"block":"none"},id:"meld",onClick:function(){return e.setGameState("isMelding")}},"Meld"),r.a.createElement("button",{disabled:l(),style:{display:t?"block":"none"},id:"layoff",onClick:function(){return e.setGameState("isLayingoff")}},"Layoff"),r.a.createElement("button",{style:{display:t&(n||o)?"block":"none"},id:"cancel-meld",onClick:this.cancelMeldOrLayoff},"Cancel"),r.a.createElement("button",{style:{display:t?"block":"none"},id:"sort-hand",onClick:this.sortHand},"Sort hand")))}}]),a}(n.Component),G="https://localhost:3000",H="/user/signin",z="/user/signup";function U(e,t){return I.apply(this,arguments)}function I(){return(I=Object(l.a)(o.a.mark((function e(t,a){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(G+H,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({username:t,password:a})});case 3:return n=e.sent,e.next=6,n.json();case 6:if(r=e.sent,200===n.status||!1!==n.ok){e.next=11;break}throw new Error(r.err.message);case 11:return e.abrupt("return",r);case 12:e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}function N(e,t){return W.apply(this,arguments)}function W(){return(W=Object(l.a)(o.a.mark((function e(t,a){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(G+z,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({username:t,password:a})});case 3:return n=e.sent,e.next=6,n.json();case 6:if(r=e.sent,200==n.status||0!=n.ok){e.next=11;break}throw new Error(r.err.message);case 11:return e.abrupt("return",r);case 12:e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}var T=function(e){Object(f.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={message:"Hello from context store",errorMsg:"",username:"",password:"",user:"",token:"",hasGameStarted:!1,websocket:new WebSocket("wss://localhost:3000")},n.toggleLoading=n.toggleLoading.bind(Object(h.a)(n)),n.signin=n.signin.bind(Object(h.a)(n)),n.signup=n.signup.bind(Object(h.a)(n)),n.validate=n.validate.bind(Object(h.a)(n)),n.handleInputUsername=n.handleInputUsername.bind(Object(h.a)(n)),n.handleInputPassword=n.handleInputPassword.bind(Object(h.a)(n)),n.setErrorMessage=n.setErrorMessage.bind(Object(h.a)(n)),n.startingGame=n.startingGame.bind(Object(h.a)(n)),n}return Object(u.a)(a,[{key:"componentWillUnmount",value:function(){this.state.websocket&&this.state.websocket.close()}},{key:"startingGame",value:function(){this.setState({hasGameStarted:!0})}},{key:"handleInputUsername",value:function(e){this.setState({username:e.target.value})}},{key:"handleInputPassword",value:function(e){this.setState({password:e.target.value})}},{key:"setErrorMessage",value:function(e){this.setState({errorMsg:e})}},{key:"signin",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({isLoading:!0,errorMsg:""}),e.prev=1,this.validate()){e.next=5;break}return this.setErrorMessage("Username or password is invalid. Please try again."),e.abrupt("return");case 5:return e.next=7,U(this.state.username,this.state.password);case 7:t=e.sent,this.setState({token:t.token,user:t.user}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),this.setErrorMessage(e.t0.message);case 14:return e.prev=14,this.setState({isLoading:!1}),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"signup",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({isLoading:!0,errorMsg:""}),e.prev=1,this.validate()){e.next=5;break}return this.setErrorMessage("Username or password is invalid. Please try again."),e.abrupt("return");case 5:return e.next=7,N(this.state.username,this.state.password);case 7:t=e.sent,this.setState({token:t.token,user:t.user}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),this.setErrorMessage(e.t0.message);case 14:return e.prev=14,this.setState({isLoading:!1}),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"validate",value:function(){var e=this.state,t=e.username,a=e.password;return!(t.length>50||a.length>50)}},{key:"toggleLoading",value:function(){}},{key:"render",value:function(){var e=this.state,t=e.errorMsg,a=e.username,n=e.password,s=e.user,i=e.token,c=e.hasGameStarted,o=e.websocket,l=null!==s&&""!==i;return r.a.createElement(w.a,null,r.a.createElement(v,{value:this.state},r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"error-message"},t||null),r.a.createElement(S.d,null,r.a.createElement(C,{isSignedIn:l,type:"guest",path:"/signup"},r.a.createElement(y,{signup:this.signup,handleInputUsername:this.handleInputUsername,handleInputPassword:this.handleInputPassword,username:a,password:n})),r.a.createElement(C,{isSignedIn:l,type:"private",path:"/game"},r.a.createElement(P,{hasGameStarted:c,startingGame:this.startingGame,setErrorMessage:this.setErrorMessage,websocket:o})),r.a.createElement(C,{isSignedIn:l,type:"guest",path:"/"},r.a.createElement(k,{signin:this.signin,handleInputUsername:this.handleInputUsername,handleInputPassword:this.handleInputPassword,username:a,password:n}))))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[24,1,2]]]);
//# sourceMappingURL=main.cb1274db.chunk.js.map