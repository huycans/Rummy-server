{"version":3,"sources":["js/context.js","js/components/Signin.js","js/components/Signup.js","js/components/AuthRoute.js","js/components/lib/card.js/cards.js","js/components/API/game.js","js/components/GameHandler.js","js/components/helper.js","js/components/Game.js","js/components/Default.js","js/constants.js","js/components/API/account.js","js/components/Stats.js","App.js","serviceWorker.js","index.js"],"names":["AppContext","React","createContext","ContextProvider","props","Provider","value","this","children","Component","ContextConsumer","Consumer","Signin","handleInputUsername","handleInputPassword","username","password","signin","signingIn","e","preventDefault","className","htmlFor","maxLength","type","name","onChange","onClick","style","marginTop","to","Signup","signup","signingUp","minLength","AuthRoute","isSignedIn","cards","opt","cardSize","width","height","padding","animationSpeed","table","cardback","acesHigh","cardsUrl","blackJoker","redJoker","loop","zIndexCounter","all","start","end","mouseEvent","ev","card","$","data","container","handler","_click","func","call","context","window","shuffle","deck","i","length","j","Math","floor","random","tempi","tempj","Card","suit","rank","init","Container","Deck","options","Hand","Pile","prototype","shortName","toUpperCase","faceUp","el","css","position","cursor","addClass","appendTo","showCard","moveToFront","resize","size","toString","moveTo","x","y","speed","callback","top","left","animate","rotate","angle","xpos","ypos","hideCard","Array","extend","obj","prop","addCard","addCards","removeCard","push","splice","click","mousedown","_mousedown","mouseup","_mouseup","render","calcPosition","parseInt","targetTop","targetLeft","queue","immediate","me","flip","setTimeout","topCard","round","deal","count","hands","totalCount","dealOne","forEach","index","sort","temp","dealCounter","hasOwnProperty","l","on","getFakeCards","SIZE","requestJoin","code","userToken","a","fetch","encodeURIComponent","method","headers","Accept","Authorization","response","json","responseJSON","status","message","gameHandler","JSON","parse","cmd","dealing","draw","discard","moveMeldToPile","moveCardToMeld","declareWinner","setErrorMessage","history","setState","giveCardValue","makeHistory","map","move","ind","key","player","from","meld","score","Game","state","isMelding","isAddingToMeld","isWaiting","isDrawing","isDiscarding","hasDrawn","hasDiscarded","tableName","myhand","ophand","discardPile","meldPile","currentMeld","currentSelectedCardHand","currentSelectedCardDeck","currentSelectedCardDiscard","currentSelectedMeld","token","hint","hasGameEnded","winner","gamedraw","lobbycode","handRef","createRef","startGame","bind","handleMeld","handleAddToMeld","cancelMeldOrAddToMeld","sortHand","setGameState","joinGameWithCode","sendWSData","setHint","handleLobbyCode","target","hide","websocket","onopen","event","Cards","onmessage","addEventListener","close","lobby","send","stringify","joinResponse","userId","user","id","hasGameStarted","cardToDiscard","find","cardVal","stateToSet","addtionalStates","cardToDraw","pop","stopPropagation","test","startingGame","self","cardToAdd","cardInd","opcards","melds","meldArr","newMeld","myturn","drawPhase","cardToMoveToMeld","meldToAdd","meldId","alert","validMeld","abs","meldToMove","isCurrentMeldValid","some","disableAddToMeldButton","display","placeholder","Fragment","location","reload","disabled","Default","SERVER_URL","SERVER_API","body","ok","Error","err","checkSession","sessionToken","success","Stats","userInfo","updateUserInfo","gameHistory","gamePlayed","gameWon","gameLost","gameDraw","game","App","errorMsg","isFinishedLoading","toggleLoading","validateUsernamePassword","serverWebsocketURL","process","WSS","localstate","localStorage","getItem","clear","WebSocket","isLoading","setItem","path","exact","Boolean","hostname","match","ReactDOM","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console"],"mappings":"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","file":"static/js/main.d9fec2d3.chunk.js","sourcesContent":["\r\nimport React, { Component } from \"react\";\r\n\r\nconst AppContext = React.createContext();\r\n\r\n/**\r\n * COntext is used to store the state of the application and pass it down\r\n * to components, using ContextConsumer\r\n *\r\n * @class ContextProvider\r\n * @extends {Component}\r\n */\r\nclass ContextProvider extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n  render() {\r\n    return (\r\n      <AppContext.Provider value={{\r\n        ...this.props.value\r\n      }}>\r\n        {this.props.children}\r\n      </AppContext.Provider>\r\n    );\r\n  }\r\n}\r\nconst ContextConsumer = AppContext.Consumer;\r\nexport { ContextProvider, ContextConsumer };","import React, { Component } from 'react';\r\nimport { ContextConsumer } from '../context';\r\nimport {\r\n  Link\r\n} from \"react-router-dom\";\r\nconst Signin = ({ handleInputUsername, handleInputPassword, username, password, signin }) => {\r\n  const signingIn = (e) => {\r\n    e.preventDefault();\r\n    signin();\r\n  }\r\n  return (\r\n    <ContextConsumer>\r\n      {value =>\r\n        <div className=\"container\">\r\n          <div className=\"row\">\r\n            <h1>Welcome to Rummy</h1>\r\n          </div>\r\n          <div className=\"row\">\r\n            <h2>Signin</h2>\r\n          </div>\r\n          <div className=\"row\">\r\n            <form>\r\n              <div className=\"row w-100\">\r\n                <label htmlFor=\"username\">\r\n                  Username: &nbsp;\r\n                    <input  maxLength={50} type=\"text\" name=\"username\" value={username}\r\n                    onChange={handleInputUsername} />\r\n                </label>\r\n                <br />\r\n              </div>\r\n\r\n              <div className=\"row w-100\">\r\n                <label htmlFor=\"username\">\r\n                  Password: &nbsp;\r\n                  <input  maxLength={50} type=\"password\" name=\"password\" value={password}\r\n                    onChange={handleInputPassword} />\r\n                </label>\r\n                <br />\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <input type=\"submit\" value=\"Signin\" onClick={signingIn} />\r\n              </div>\r\n            </form>\r\n            <div style={{marginTop: \"20px\"}} className=\"row\">\r\n              <p>\r\n                Username must be between 3 and 50 characters, contains only alphanumerics or special characters (@._).\r\n              </p>\r\n              <p>\r\n                Password must be between 8 and 20 characters, at least one uppercase letter, one lowercase letter, one number and one special character (@$!%*?&_).\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <br />\r\n            <br />\r\n            <h4>Don't have an account yet?</h4>\r\n            <Link to=\"/signup\">Click here</Link>\r\n          </div>\r\n        </div>\r\n      }\r\n    </ContextConsumer>\r\n  );\r\n};\r\nexport default Signin;","import React, { Component } from 'react';\r\nimport { ContextConsumer } from '../context';\r\nimport {\r\n  Link\r\n} from \"react-router-dom\";\r\n\r\nconst Signup = ({ handleInputUsername, handleInputPassword, username, password, signup }) => {\r\n  const signingUp = (e) => {\r\n    e.preventDefault();\r\n    signup();\r\n  }\r\n    return (\r\n      <ContextConsumer>\r\n        {value =>\r\n          <div className=\"container\">\r\n            <div className=\"row\">\r\n              <h1>Welcome to Rummy</h1>\r\n            </div>\r\n            <div className=\"row\">\r\n              <h2>Signup</h2>\r\n            </div>\r\n            <div className=\"row\">\r\n              <form>\r\n                <div className=\"row w-100\">\r\n                  <label htmlFor=\"username\">\r\n                    Username: &nbsp;\r\n                    <input minLength={3} maxLength={50} type=\"text\" name=\"username\" value={username}\r\n                      onChange={handleInputUsername} />\r\n                  </label>\r\n                  <br />\r\n                </div>\r\n\r\n                <div className=\"row w-100\">\r\n                  <label htmlFor=\"username\">\r\n                    Password: &nbsp;\r\n                  <input minLength={8} maxLength={20} type=\"password\" name=\"password\" value={password}\r\n                      onChange={handleInputPassword} />\r\n                  </label>\r\n                  <br />\r\n                </div>\r\n\r\n                <div className=\"row\">\r\n                  <input type=\"submit\" value=\"Signup\" onClick={signingUp}/>\r\n                </div>\r\n              </form>\r\n              <div style={{ marginTop: \"20px\" }} className=\"row\">\r\n                <p>\r\n                  Username must be between 3 and 50 characters, contains only alphanumerics or special characters (@._).\r\n              </p>\r\n                <p>\r\n                  Password must be between 8 and 20 characters, at least one uppercase letter, one lowercase letter, one number and one special character (@$!%*?&_).\r\n              </p>\r\n              </div>\r\n            </div>\r\n            <div>\r\n              <br />\r\n              <br />\r\n              <h4>Already have an account?</h4>\r\n              <Link to=\"/\">Click here</Link>\r\n            </div>\r\n          </div>\r\n        }\r\n      </ContextConsumer>\r\n      )\r\n}\r\nexport default Signup;\r\n","import React from \"react\";\r\nimport { Redirect, Route } from \"react-router\";\r\n\r\n//HOC to redirect user to game if authenticated, to signin if not\r\nconst AuthRoute = props => {\r\n  const { isSignedIn, type } = props;\r\n  if (type === \"guest\" && isSignedIn) return <Redirect to=\"/game\" />;\r\n  else if (type === \"private\" && !isSignedIn) return <Redirect to=\"/\" />;\r\n\r\n  return <Route {...props} >\r\n  </Route>;\r\n};\r\n\r\nexport default AuthRoute;","import $ from \"jquery\";\r\n\r\nconst STANDARD = 0;\r\n\r\nvar cards = function() {\r\n  //The global options\r\n  var opt = {\r\n    cardSize: {\r\n      width: 69,\r\n      height: 94,\r\n      padding: 18\r\n    },\r\n    animationSpeed: 100,\r\n    table: 'body',\r\n    cardback: 'red',\r\n    acesHigh: false,\r\n    cardsUrl: 'img/cards.png',\r\n    blackJoker: false,\r\n    redJoker: false,\r\n    type: STANDARD,\r\n    loop: 1\r\n  };\r\n  var zIndexCounter = 1;\r\n  var all = []; //All the cards created.\r\n  var start = 1;\r\n  var end = start + 12;\r\n\r\n  function mouseEvent(ev) {\r\n    var card = $(this).data('card');\r\n    if (card.container) {\r\n      var handler = card.container._click;\r\n      if (handler) {\r\n        handler.func.call(handler.context || window, card, ev);\r\n      }\r\n    }\r\n  }\r\n\r\n  function getFakeCards() {\r\n    return new Card('bj', 0, opt.table);\r\n  }\r\n  function init(options) {\r\n    if (options) {\r\n      for (var i in options) {\r\n        if (opt.hasOwnProperty(i)) {\r\n          opt[i] = options[i];\r\n        }\r\n      }\r\n    }\r\n\r\n    opt.acesHigh = false;\r\n    start = opt.acesHigh ? 2 : 1;\r\n    end = start + 12;\r\n\r\n\r\n    opt.table = $(opt.table)[0];\r\n    if ($(opt.table).css('position') == 'static') {\r\n      $(opt.table).css('position', 'relative');\r\n    }\r\n    for (let l = 0; l < opt.loop; l++)\r\n      for (var i = start; i <= end; i++) {\r\n        all.push(new Card('c', i, opt.table));\r\n        all.push(new Card('d', i, opt.table));\r\n        all.push(new Card('h', i, opt.table));\r\n        all.push(new Card('s', i, opt.table));\r\n      }\r\n    if (opt.blackJoker) {\r\n      all.push(new Card('bj', 0, opt.table));\r\n    }\r\n    if (opt.redJoker) {\r\n      all.push(new Card('rj', 0, opt.table));\r\n    }\r\n    \r\n    $('.card').on(\"click\", mouseEvent);\r\n    shuffle(all);\r\n  }\r\n\r\n  function shuffle(deck) {\r\n    //Fisher yates shuffle\r\n    var i = deck.length;\r\n    if (i == 0) return;\r\n    while (--i) {\r\n      var j = Math.floor(Math.random() * (i + 1));\r\n      var tempi = deck[i];\r\n      var tempj = deck[j];\r\n      deck[i] = tempj;\r\n      deck[j] = tempi;\r\n    }\r\n  }\r\n\r\n  function Card(suit, rank, table) {\r\n    this.init(suit, rank, table);\r\n  }\r\n\r\n  Card.prototype = {\r\n    init: function(suit, rank, table) {\r\n      this.shortName = suit + rank;\r\n      this.suit = suit;\r\n      this.rank = rank;\r\n      this.name = suit.toUpperCase() + rank;\r\n      this.faceUp = false;\r\n      this.el = $('<div/>').css({\r\n        width: opt.cardSize.width,\r\n        height: opt.cardSize.height,\r\n        \"background-image\": 'url(' + opt.cardsUrl + ')',\r\n        position: 'absolute',\r\n        cursor: 'pointer'\r\n      }).addClass('card').data('card', this).appendTo($(table));\r\n      this.showCard();\r\n      this.moveToFront();\r\n    },\r\n\r\n    resize: function (size) {\r\n      switch (size) {\r\n        case \"small\":\r\n          $(this.el).css({\r\n            width: 20,\r\n            height: 47\r\n          })\r\n          break;\r\n\r\n        case \"default\":\r\n          $(this.el).css({\r\n            width: opt.cardSize.width,\r\n            height: opt.cardSize.height\r\n          })\r\n          break;\r\n        default:\r\n\r\n          break;\r\n      }\r\n    },\r\n\r\n    toString: function() {\r\n      return this.name;\r\n    },\r\n\r\n    moveTo: function(x, y, speed, callback) {\r\n      var props = {\r\n        top: y - (opt.cardSize.height / 2),\r\n        left: x - (opt.cardSize.width / 2)\r\n      };\r\n      $(this.el).animate(props, speed || opt.animationSpeed, callback);\r\n    },\r\n\r\n    rotate: function(angle) {\r\n      $(this.el)\r\n        .css('-webkit-transform', 'rotate(' + angle + 'deg)')\r\n        .css('-moz-transform', 'rotate(' + angle + 'deg)')\r\n        .css('-ms-transform', 'rotate(' + angle + 'deg)')\r\n        .css('transform', 'rotate(' + angle + 'deg)')\r\n        .css('-o-transform', 'rotate(' + angle + 'deg)');\r\n    },\r\n\r\n    showCard: function() {\r\n      var offsets = {\r\n        \"c\": 0,\r\n        \"d\": 1,\r\n        \"h\": 2,\r\n        \"s\": 3,\r\n        \"rj\": 2,\r\n        \"bj\": 3\r\n      };\r\n      var xpos, ypos;\r\n      var rank = this.rank;\r\n      if (rank == 14) {\r\n        rank = 1; //Aces high must work as well.\r\n      }\r\n      xpos = -rank * opt.cardSize.width;\r\n      ypos = -offsets[this.suit] * opt.cardSize.height;\r\n      this.rotate(0);\r\n      $(this.el).css('background-position', xpos + 'px ' + ypos + 'px');\r\n    },\r\n\r\n    hideCard: function(position) {\r\n      var y = opt.cardback == 'red' ? 0 * opt.cardSize.height : -1 * opt.cardSize.height;\r\n      $(this.el).css('background-position', '0px ' + y + 'px');\r\n      this.rotate(0);\r\n    },\r\n\r\n    moveToFront: function() {\r\n      $(this.el).css('z-index', zIndexCounter++);\r\n    }\r\n  };\r\n\r\n  function Container() {\r\n\r\n  }\r\n\r\n  Container.prototype = new Array();\r\n  Container.prototype.extend = function(obj) {\r\n    for (var prop in obj) {\r\n      this[prop] = obj[prop];\r\n    }\r\n  }\r\n  Container.prototype.extend({\r\n    addCard: function(card) {\r\n      this.addCards([card]);\r\n    },\r\n\r\n    addCards: function(cards) {\r\n      for (var i = 0; i < cards.length; i++) {\r\n        var card = cards[i];\r\n        if (card.container) {\r\n          card.container.removeCard(card);\r\n        }\r\n        this.push(card);\r\n        card.container = this;\r\n      }\r\n    },\r\n\r\n    removeCard: function(card) {\r\n      for (var i = 0; i < this.length; i++) {\r\n        if (this[i] == card) {\r\n          this.splice(i, 1);\r\n          return true;\r\n        }\r\n      }\r\n      return false;\r\n    },\r\n\r\n    init: function(options) {\r\n      options = options || {};\r\n      this.x = options.x || $(opt.table).width() / 2;\r\n      this.y = options.y || $(opt.table).height() / 2;\r\n      this.faceUp = options.faceUp;\r\n    },\r\n\r\n    click: function(func, context) {\r\n      this._click = {\r\n        func: func,\r\n        context: context\r\n      };\r\n    },\r\n\r\n    mousedown: function(func, context) {\r\n      this._mousedown = {\r\n        func: func,\r\n        context: context\r\n      };\r\n    },\r\n\r\n    mouseup: function(func, context) {\r\n      this._mouseup = {\r\n        func: func,\r\n        context: context\r\n      };\r\n    },\r\n\r\n    render: function(options) {\r\n      options = options || {};\r\n      var speed = options.speed || opt.animationSpeed;\r\n      this.calcPosition(options);\r\n      for (var i = 0; i < this.length; i++) {\r\n        var card = this[i];\r\n        zIndexCounter++;\r\n        card.moveToFront();\r\n        var top = parseInt($(card.el).css('top'));\r\n        var left = parseInt($(card.el).css('left'));\r\n        if (top != card.targetTop || left != card.targetLeft) {\r\n          var props = {\r\n            top: card.targetTop,\r\n            left: card.targetLeft,\r\n            queue: false\r\n          };\r\n          if (options.immediate) {\r\n            $(card.el).css(props);\r\n          } else {\r\n            $(card.el).animate(props, speed);\r\n          }\r\n        }\r\n      }\r\n      var me = this;\r\n      var flip = function() {\r\n        for (var i = 0; i < me.length; i++) {\r\n          if (me.faceUp) {\r\n            me[i].showCard();\r\n          } else {\r\n            me[i].hideCard();\r\n          }\r\n        }\r\n      }\r\n      if (options.immediate) {\r\n        flip();\r\n      } else {\r\n        setTimeout(flip, speed / 2);\r\n      }\r\n\r\n      if (options.callback) {\r\n        setTimeout(options.callback, speed);\r\n      }\r\n    },\r\n\r\n    topCard: function() {\r\n      return this[this.length - 1];\r\n    },\r\n\r\n    toString: function() {\r\n      return 'Container';\r\n    }\r\n  });\r\n\r\n  function Deck(options) {\r\n    this.init(options);\r\n  }\r\n\r\n  Deck.prototype = new Container();\r\n  Deck.prototype.extend({\r\n    calcPosition: function(options) {\r\n      options = options || {};\r\n      var left = Math.round(this.x - opt.cardSize.width / 2, 0);\r\n      var top = Math.round(this.y - opt.cardSize.height / 2, 0);\r\n      var condenseCount = 6;\r\n      for (var i = 0; i < this.length; i++) {\r\n        if (i > 0 && i % condenseCount == 0) {\r\n          top -= 1;\r\n          left -= 1;\r\n        }\r\n        this[i].targetTop = top;\r\n        this[i].targetLeft = left;\r\n      }\r\n    },\r\n\r\n    toString: function() {\r\n      return 'Deck';\r\n    },\r\n\r\n    deal: function(count, hands, speed, callback) {\r\n      var me = this;\r\n      var i = 0;\r\n      var totalCount = count * hands.length;\r\n\r\n      function dealOne() {\r\n        if (me.length == 0 || i == totalCount) {\r\n          if (callback) {\r\n            callback();\r\n          }\r\n          return;\r\n        }\r\n        hands[i % hands.length].addCard(me.topCard());\r\n        hands[i % hands.length].render({\r\n          callback: dealOne,\r\n          speed: speed\r\n        });\r\n        i++;\r\n      }\r\n      dealOne();\r\n    }\r\n  });\r\n\r\n  function Hand(options) {\r\n    this.init(options);\r\n  }\r\n  Hand.prototype = new Container();\r\n  Hand.prototype.extend({\r\n    calcPosition: function(options) {\r\n      options = options || {};\r\n      var width = opt.cardSize.width + (this.length - 1) * opt.cardSize.padding;\r\n      var left = Math.round(this.x - width / 2);\r\n      var top = Math.round(this.y - opt.cardSize.height / 2, 0);\r\n      for (var i = 0; i < this.length; i++) {\r\n        this[i].targetTop = top;\r\n        this[i].targetLeft = left + i * opt.cardSize.padding;\r\n      }\r\n    },\r\n    resize: function (size) {\r\n      switch (size) {\r\n        case \"small\":\r\n          this.forEach((card, index) => {\r\n            card.resize(\"small\");\r\n          });\r\n          break;\r\n        case \"default\":\r\n          this.forEach((card, index) => {\r\n            card.resize(\"default\");\r\n          });\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    },\r\n\r\n    sort: function () {\r\n      for (var i=0; i<this.length-1; i++ ){\r\n        for (var j = 0; j < this.length - i - 1; j++)\r\n          if (this[j].suit < this[j+1].suit ||\r\n            (this[j].suit == this[j + 1].suit && this[j].rank > this[j + 1].rank)){\r\n              var temp = this[j];\r\n              this[j] = this[j + 1];\r\n              this[j + 1] = temp; \r\n            }\r\n      }\r\n    },\r\n\r\n    toString: function() {\r\n      return 'Hand';\r\n    }\r\n\r\n  });\r\n\r\n  function Pile(options) {\r\n    this.init(options);\r\n  }\r\n\r\n  Pile.prototype = new Container();\r\n  Pile.prototype.extend({\r\n    calcPosition: function(options) {\r\n      options = options || {};\r\n    },\r\n\r\n    toString: function() {\r\n      return 'Pile';\r\n    },\r\n\r\n    deal: function(count, hands) {\r\n      if (!this.dealCounter) {\r\n        this.dealCounter = count * hands.length;\r\n      }\r\n    }\r\n  });\r\n\r\n\r\n  return {\r\n    init: init,\r\n    all: all,\r\n    getFakeCards: getFakeCards,\r\n    options: opt,\r\n    SIZE: opt.cardSize,\r\n    Card: Card,\r\n    Container: Container,\r\n    Deck: Deck,\r\n    Hand: Hand,\r\n    Pile: Pile,\r\n    shuffle: shuffle\r\n  };\r\n};\r\n\r\nexport default cards;\r\n","async function requestJoin(code, userToken) {\r\n  try {\r\n    let response = await fetch(\"https://localhost:3000/join/\" + encodeURIComponent(code) , {\r\n      method: \"GET\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        \"Access-Control-Allow-Origin\": \"*\",\r\n        Authorization: \"Bearer \" + userToken\r\n      }\r\n    });\r\n    let responseJSON = await response.json();\r\n\r\n    if (response.status !== 200) {\r\n      throw responseJSON.message;\r\n    } \r\n\r\n    return responseJSON;\r\n  }\r\n  catch (error) {\r\n    throw error;\r\n  }\r\n}\r\n\r\nexport { requestJoin }","\r\n\r\n//handle what happens when a cmd is received from the server\r\n//this refers to game.js\r\n//split up to avoid 1000s of lines of code\r\nfunction gameHandler(message){\r\n  let data = JSON.parse(message.data);\r\n  // console.log(\"data from server\", data);\r\n\r\n  //initial setup with deck, discardPile and my hand\r\n  if (data.cmd === \"cards\") {\r\n    //setstate deck, discardPile, hand, op's hand\r\n    this.dealing(data);\r\n  } else if (data.cmd == \"draw\") {\r\n    this.draw(data);\r\n  } else if (data.cmd == \"discard\") {\r\n    this.discard(data);\r\n  } else if (data.cmd == \"newmeld\") {\r\n    this.moveMeldToPile(data)\r\n  } else if (data.cmd == \"addmeld\") {\r\n    this.moveCardToMeld(data);\r\n  } else if (data.cmd == \"win\" || data.cmd == \"loss\" || data.cmd == \"gamedraw\") {\r\n    this.declareWinner(data)\r\n  } else if (data.cmd == \"exit\") {\r\n    this.props.setErrorMessage(\"Lobby is full or not available. Please choose another lobby code.\")\r\n  } else if (data.cmd == \"error\") {\r\n    this.props.setErrorMessage(data.message)\r\n  }\r\n\r\n  if (data.history){\r\n    this.setState({history: data.history})\r\n  }\r\n}\r\n\r\nexport default gameHandler;","import React, { Component } from 'react';\r\n\r\nconst giveCardValue = (card) => {\r\n  let rank = 0;\r\n  switch (card.rank) {\r\n    case 11:\r\n      rank = \"J\";\r\n      break;\r\n    case 12:\r\n      rank = \"Q\";\r\n      break;\r\n    case 13:\r\n      rank = \"K\";\r\n      break;\r\n    default:\r\n      rank = card.rank;\r\n      break;\r\n  }\r\n  return \"\" + rank + card.suit.toUpperCase();\r\n};\r\n\r\nconst makeHistory = (history) => {\r\n  return history.map((move, ind) => {\r\n    if (move.cmd == \"draw\") {\r\n      return <div key={ind}>Player {move.player} draws {giveCardValue(move.card)} from {move.from} <br /></div>;\r\n    }\r\n    else if (move.cmd == \"discard\") {\r\n      return <div key={ind}>Player {move.player} discards {giveCardValue(move.card)}<br /></div>;\r\n    }\r\n    else if (move.cmd == \"newmeld\") {\r\n      return <div key={ind}>Player {move.player} melds {move.meld.map((card) => giveCardValue(card) + \" \")}<br /></div>;\r\n    }\r\n    else if (move.cmd == \"addmeld\") {\r\n      return <div key={ind}>Player {move.player} adds {giveCardValue(move.card)} to make meld {move.meld.map((card) => giveCardValue(card) + \" \")}<br /></div>;\r\n    }\r\n    else if (move.cmd == \"win\" || move.cmd == \"loss\") {\r\n      return <div key={ind}>Player {move.player} won with {move.score} points<br /></div>;\r\n    }\r\n    else if (move.cmd == \"gamedraw\") {\r\n      return <div key={ind}>The game ended in a draw.<br /></div>;\r\n    }\r\n  });\r\n};\r\n\r\nexport { giveCardValue, makeHistory}","import React, { Component, useRef } from \"react\";\r\n// import Deck from './Cards/lib/deck';\r\nimport Cards from './lib/card.js/cards';\r\nimport $ from 'jquery';\r\n\r\nimport { requestJoin } from \"../components/API/game\";\r\nimport gameHandler from \"./GameHandler\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { makeHistory } from \"./helper\";\r\n\r\nconst tempHistory = [\r\n  {\r\n    \"cmd\": \"draw\",\r\n    \"from\": \"deck\",\r\n    \"player\": 0,\r\n    \"card\": {\r\n      \"suit\": \"c\",\r\n      \"rank\": 13\r\n    }\r\n  },\r\n  {\r\n    \"cmd\": \"newmeld\",\r\n    \"player\": 0,\r\n    \"meld\": [\r\n      {\r\n        \"suit\": \"s\",\r\n        \"rank\": 1\r\n      },\r\n      {\r\n        \"suit\": \"s\",\r\n        \"rank\": 2\r\n      },\r\n      {\r\n        \"suit\": \"s\",\r\n        \"rank\": 3\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    \"cmd\": \"newmeld\",\r\n    \"player\": 0,\r\n    \"meld\": [\r\n      {\r\n        \"suit\": \"s\",\r\n        \"rank\": 4\r\n      },\r\n      {\r\n        \"suit\": \"s\",\r\n        \"rank\": 5\r\n      },\r\n      {\r\n        \"suit\": \"s\",\r\n        \"rank\": 6\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    \"cmd\": \"newmeld\",\r\n    \"player\": 0,\r\n    \"meld\": [\r\n      {\r\n        \"suit\": \"s\",\r\n        \"rank\": 7\r\n      },\r\n      {\r\n        \"suit\": \"s\",\r\n        \"rank\": 8\r\n      },\r\n      {\r\n        \"suit\": \"s\",\r\n        \"rank\": 9\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    \"cmd\": \"addmeld\",\r\n    \"player\": 0,\r\n    \"card\": {\r\n      \"suit\": \"s\",\r\n      \"rank\": 10\r\n    },\r\n    \"meld\": [\r\n      {\r\n        \"suit\": \"s\",\r\n        \"rank\": 7\r\n      },\r\n      {\r\n        \"suit\": \"s\",\r\n        \"rank\": 8\r\n      },\r\n      {\r\n        \"suit\": \"s\",\r\n        \"rank\": 9\r\n      },\r\n      {\r\n        \"suit\": \"s\",\r\n        \"rank\": 10\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    \"cmd\": \"discard\",\r\n    \"player\": 0,\r\n    \"card\": {\r\n      \"suit\": \"c\",\r\n      \"rank\": 13\r\n    }\r\n  },\r\n  {\r\n    \"cmd\": \"win\",\r\n    \"score\": 58,\r\n    \"player\": 0\r\n  }\r\n]\r\n\r\nexport default class Game extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      isMelding: false, //(pick 3 cards to meld)\r\n      isAddingToMeld: false, //(add 1 card to 1 of the melds)\r\n      isWaiting: false, //(for server command, other player's turn...)\r\n      isDrawing: false, //(from deck or discard pile)\r\n      isDiscarding: false, //(remove 1 card from hand to discard pile),\r\n      hasDrawn: false,\r\n      hasDiscarded: false,\r\n      cards: null,\r\n      tableName: null,\r\n      deck: null,\r\n      myhand: null,\r\n      ophand: null,\r\n      discardPile: null,\r\n      meldPile: null,\r\n      currentMeld: null,\r\n      currentSelectedCardHand: null,\r\n      currentSelectedCardDeck: null,\r\n      currentSelectedCardDiscard: null,\r\n      currentSelectedMeld: null,\r\n      //the game code to distinguish games, called lobby in server\r\n      code: \"\",\r\n      //randomly generated token from the server\r\n      token: \"\",\r\n      hint: \"\",\r\n      hasGameEnded: false,\r\n      winner: false,\r\n      gamedraw: false,\r\n      score: 0,\r\n      lobbycode: \"\",\r\n      history: []\r\n    };\r\n\r\n    this.handRef = React.createRef();\r\n    this.startGame = this.startGame.bind(this);\r\n    this.handleMeld = this.handleMeld.bind(this);\r\n    this.handleAddToMeld = this.handleAddToMeld.bind(this);\r\n    this.cancelMeldOrAddToMeld = this.cancelMeldOrAddToMeld.bind(this);\r\n    this.dealing = this.dealing.bind(this);\r\n    this.sortHand = this.sortHand.bind(this);\r\n    this.draw = this.draw.bind(this);\r\n    this.discard = this.discard.bind(this);\r\n    this.setGameState = this.setGameState.bind(this);\r\n    this.joinGameWithCode = this.joinGameWithCode.bind(this);\r\n    this.sendWSData = this.sendWSData.bind(this);\r\n    this.gameHandler = gameHandler.bind(this);\r\n    this.moveMeldToPile = this.moveMeldToPile.bind(this);\r\n    this.setHint = this.setHint.bind(this);\r\n    this.declareWinner = this.declareWinner.bind(this);\r\n    this.handleLobbyCode = this.handleLobbyCode.bind(this);\r\n  }\r\n\r\n  handleLobbyCode(e){\r\n    this.setState({lobbycode: e.target.value});\r\n  }\r\n\r\n  declareWinner(data){\r\n    this.setState({\r\n      hasGameEnded: true,\r\n      winner: data.cmd == \"win\" ? true: false,\r\n      gamedraw: data.cmd == \"gamedraw\" ? true : false,\r\n      score: data.score\r\n    });\r\n    //hide all the cards on the screen\r\n    this.state.cards.all.forEach((card) => $(card.el).hide());\r\n    this.state.ophand.forEach((card) => $(card.el).hide());\r\n    this.state.myhand.forEach((card) => $(card.el).hide());\r\n    this.state.discardPile.forEach((card) => $(card.el).hide());\r\n    this.state.meldPile.forEach(\r\n      (meld => {\r\n        meld.forEach(\r\n          (card) => $(card.el).hide()\r\n        )\r\n      })\r\n      );\r\n  }\r\n\r\n  setHint(message) {\r\n    this.setState({ hint: message });\r\n  }\r\n\r\n  componentDidMount() {\r\n    let { websocket } = this.props;\r\n    //setup websocket events\r\n    websocket.onopen = (event) => {\r\n      // console.log(\"Connected to server.\");\r\n    };\r\n\r\n    //starting an instance of card.js\r\n    var cards = Cards();\r\n    const tableName = '#card-table';\r\n\r\n    //Tell the library which element to use for the table\r\n    cards.init({ table: tableName });\r\n    this.setState({ cards, tableName });\r\n\r\n    websocket.onmessage = (message) => {\r\n      this.gameHandler(message);\r\n    };\r\n\r\n    window.addEventListener('beforeunload', () => { // Attempts to Close Socket before forced disconnect\r\n      if (websocket) websocket.close();\r\n    });\r\n  }\r\n\r\n  //used to send data to the server, as string\r\n  sendWSData(data) {\r\n    let { websocket, userToken } = this.props;\r\n    // console.log(\"WEBSOCKET\", websocket);\r\n    const { code, token } = this.state;\r\n    //always includes token and game code when sending data\r\n    data.lobby = code;\r\n    data.token = token;\r\n    data.userToken = userToken;\r\n    // Send Data (as string)\r\n    websocket.send(JSON.stringify(data));\r\n  }\r\n\r\n  //setup websocket connection to the server\r\n  async joinGameWithCode(code, userToken) {\r\n    try {\r\n      //request to join a game with code typed in by user\r\n      let joinResponse = await requestJoin(code, userToken);\r\n\r\n      let token = joinResponse.token;\r\n      // console.log(token);\r\n\r\n      this.setState({\r\n        code, token\r\n      });\r\n\r\n      let userId = this.props.user.id;\r\n\r\n      //send request to join a game\r\n      this.sendWSData({ cmd: \"join\", userId: userId });\r\n\r\n    } catch (error) {\r\n      // console.log(\"An error occurs when trying to join: \", error);\r\n      this.props.setErrorMessage(\"An error occurs when trying to join \" + error);\r\n      this.setState({\r\n        hasGameStarted: false\r\n      })\r\n    }\r\n  }\r\n\r\n  discard(data) {\r\n    let { currentSelectedCardHand, isDiscarding, myhand, discardPile, ophand, deck } = this.state;\r\n    let self = this;\r\n    let cardToDiscard = data.card;\r\n\r\n    //if i am discarding the card\r\n    if (data.player == \"me\") {\r\n\r\n      discardPile.addCard(myhand.find((cardVal) => cardVal.suit == cardToDiscard.suit && cardVal.rank == cardToDiscard.rank));\r\n      myhand.removeCard(myhand.find((cardVal) => cardVal.suit == cardToDiscard.suit && cardVal.rank == cardToDiscard.rank));\r\n\r\n      this.setGameState(\"isWaiting\", { hasDiscarded: true, currentSelectedCardHand: null });\r\n    }\r\n    else {\r\n      //the opponent is discarding a card\r\n      //remove the top fake card from ophand, then add the card to discard from deck to ophand\r\n      $(ophand.topCard().el).hide();\r\n      ophand.removeCard(ophand.topCard());\r\n      ophand.addCard(deck.find((cardVal) => cardVal.suit == cardToDiscard.suit && cardVal.rank == cardToDiscard.rank));\r\n\r\n      ophand.render({ immediate: true });\r\n      deck.render({ immediate: true });\r\n      //then place the card from ophand into discard pile\r\n      discardPile.addCard(ophand.topCard());\r\n\r\n      //since the opponent is discarding, it is my turn\r\n      this.setGameState(\"isDrawing\", { hasDiscarded: false, hasDrawn: false });\r\n    }\r\n    ophand.sort();\r\n    myhand.render();\r\n    ophand.render();\r\n    discardPile.render();\r\n    deck.render();\r\n  }\r\n\r\n  setGameState(stateToSet, addtionalStates = {}, callback) {\r\n    let hint = \"\";\r\n    switch (stateToSet) {\r\n      case \"isMelding\":\r\n        hint = \"Please choose 3 cards that have the same rank but different suit, or same suit but in sequence.\";\r\n        break;\r\n      case \"isAddingToMeld\":\r\n        hint = \"Please choose a card, then click on a preexisiting meld that you want to lay off to.\";\r\n        break;\r\n      case \"isWaiting\":\r\n        hint = \"Waiting for other player move.\";\r\n        break;\r\n      case \"isDrawing\":\r\n        hint = \"Please draw a card from the deck or the discard pile.\";\r\n        break;\r\n      case \"isDiscarding\":\r\n        hint = \"Please choose a card from your hand to discard or you can create a meld.\";\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    this.setState({\r\n      isMelding: stateToSet == \"isMelding\" ? true : false, //(pick 3 cards to meld)\r\n      isAddingToMeld: stateToSet == \"isAddingToMeld\" ? true : false, //(add 1 card to 1 of the melds)\r\n      isWaiting: stateToSet == \"isWaiting\" ? true : false, //(for server command, other player's turn...)\r\n      isDrawing: stateToSet == \"isDrawing\" ? true : false, //(from deck or discard pile)\r\n      isDiscarding: stateToSet == \"isDiscarding\" ? true : false, //(remove 1 card from hand to discard pile),\r\n      hint,\r\n      ...addtionalStates\r\n    }, callback);\r\n  }\r\n\r\n  draw(data) {\r\n    let { isDrawing, deck, discardPile, myhand, currentSelectedCardDeck, currentSelectedCardDiscard, ophand, cards } = this.state;\r\n    let self = this;\r\n    //if i am drawing the card\r\n    // if (isDrawing && data.player == \"me\") { isDrawing is not needed anymore since the server will dictate when and where to draw\r\n    if (data.player == \"me\") {\r\n      let cardToDraw = data.card;\r\n      if (data.from == \"deck\") {\r\n        //if draw from deck\r\n        myhand.addCard(deck.find((cardVal) => cardVal.suit == cardToDraw.suit && cardVal.rank == cardToDraw.rank));\r\n\r\n        self.setGameState(\"isDiscarding\", {\r\n          currentSelectedCardDeck: null,\r\n          currentSelectedCardDiscard: null,\r\n          hasDrawn: true\r\n        });\r\n      } else {\r\n        //if draw from discard pile\r\n        myhand.addCard(discardPile.topCard());\r\n\r\n        self.setGameState(\"isDiscarding\", {\r\n          currentSelectedCardDeck: null,\r\n          currentSelectedCardDiscard: null,\r\n          hasDrawn: true\r\n        });\r\n      }\r\n      deck.render();\r\n      myhand.render();\r\n      ophand.render();\r\n      discardPile.render();\r\n    }\r\n    else {\r\n      //the opponent is drawing a card\r\n      if (data.from == \"deck\") {\r\n        //if draw from deck\r\n        deck.addCard(cards.getFakeCards());\r\n        deck.render({ immediate: true });\r\n        ophand.addCard(deck.topCard());\r\n        deck.render();\r\n        myhand.render();\r\n        ophand.render();\r\n        discardPile.render();\r\n      } else {\r\n        //if draw from discard pile\r\n        ophand.addCard(discardPile.topCard());\r\n        ophand.render();\r\n        discardPile.render();\r\n        //do this to make sure ophand contains only fake cards\r\n        deck.addCard(ophand.topCard());\r\n        ophand.addCard(cards.getFakeCards());\r\n        //invisible render\r\n        ophand.render({ immediate: true });\r\n        deck.render({ immediate: true });\r\n      }\r\n    }\r\n  }\r\n\r\n  cancelMeldOrAddToMeld() {\r\n    let { currentMeld, myhand, isMelding, isAddingToMeld } = this.state;\r\n    if (isMelding || isAddingToMeld) {\r\n      //return all cards from currentMeld to myhand\r\n      const length = currentMeld.length;\r\n      for (let i = 0; i < length; i++) {\r\n        let card = currentMeld.pop();\r\n        myhand.addCard(card);\r\n        currentMeld.removeCard(card);\r\n        myhand.render();\r\n        currentMeld.render();\r\n      }\r\n      this.setGameState(\"isDiscarding\", { currentSelectedCardHand: null });\r\n    }\r\n  }\r\n\r\n  sortHand() {\r\n    let { myhand } = this.state;\r\n    myhand.sort();\r\n    myhand.render();\r\n  }\r\n\r\n  startGame(e) {\r\n    if (e) {\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    }\r\n    let { cards, lobbycode } = this.state;\r\n    this.props.setErrorMessage(\"\");\r\n    let lobbycodeRegex = /^[a-zA-Z0-9]{5,12}$/;\r\n    if (lobbycode == \"\" || !lobbycodeRegex.test(lobbycode)){\r\n      this.props.setErrorMessage(\"Room code must contain between 5 and 12 alphanumeric characters.\");\r\n      return;\r\n    }\r\n\r\n    this.props.startingGame();\r\n\r\n\r\n    //Create a new deck of cards\r\n    var deck = new cards.Deck();\r\n    //By default it's in the middle of the container, put it slightly to the side\r\n    deck.x -= 50;\r\n\r\n    //adding all cards to the deck\r\n    deck.addCards(cards.all);\r\n\r\n    //No animation here, just get the deck onto the table.\r\n    deck.render({ immediate: true });\r\n\r\n    //Now lets create a couple of hands, one face down, one face up.\r\n    var myhand = new cards.Hand({ faceUp: true, y: 340 });\r\n    var ophand = new cards.Hand({ faceUp: false, y: 60 });\r\n\r\n    //Lets add a discard pile\r\n    var discardPile = new cards.Deck({ faceUp: true });\r\n    discardPile.x += 50;\r\n\r\n    var meldPile = [];\r\n\r\n    //this holds the 3 cards that user want to meld\r\n    //set it to slightly overlap the deck\r\n    var currentMeld = new cards.Hand({ faceUp: true, x: deck.x + 20, y: deck.y + 20 });\r\n\r\n    //setup click event, these will simply set the clicked card into state and call relevant event handler\r\n    let self = this;\r\n    myhand.click(function (card) {\r\n      if (self.state.isMelding) {\r\n        self.setState({ currentSelectedCardHand: card }, () => self.handleMeld());\r\n      }\r\n      if (self.state.isDiscarding) {\r\n        self.setState({ currentSelectedCardHand: card }, () => {\r\n          self.sendWSData({\r\n            cmd: \"discard\",\r\n            suit: card.suit,\r\n            rank: card.rank\r\n          });\r\n        });\r\n      }\r\n      if (self.state.isAddingToMeld) {\r\n        self.setState({ currentSelectedCardHand: card }, () => self.handleAddToMeld());\r\n      }\r\n    });\r\n\r\n    deck.click(function (card) {\r\n      if (self.state.isDrawing)\r\n        self.setState({ currentSelectedCardDeck: card }, () => {\r\n          self.sendWSData({\r\n            cmd: \"draw\",\r\n            from: \"deck\"\r\n          });\r\n\r\n          //this should be called when receiving command\r\n          // self.draw();\r\n        });\r\n\r\n    });\r\n\r\n    discardPile.click(function (card) {\r\n      if (self.state.isDrawing)\r\n        self.setState({ currentSelectedCardDiscard: card }, () => {\r\n          self.sendWSData({\r\n            cmd: \"draw\",\r\n            from: \"discardPile\",\r\n            rank: card.rank,\r\n            suit: card.suit\r\n          });\r\n        });\r\n    });\r\n\r\n    //saving state\r\n    this.setState({\r\n      cards,\r\n      deck,\r\n      myhand,\r\n      ophand,\r\n      discardPile,\r\n      meldPile,\r\n      currentMeld\r\n    });\r\n\r\n    //setup websocket connection and handle it\r\n    this.joinGameWithCode(lobbycode, this.props.userToken);\r\n\r\n  }\r\n\r\n  //setup the initial layout of the table\r\n  dealing(data) {\r\n    //data is from the server\r\n    //this is simply the animation, because the cards dealt is given by the server\r\n    const { cards, discardPile, deck, myhand, ophand, meldPile } = this.state;\r\n\r\n    //adding cards that is in player's hand\r\n    for (let card of data.cards) {\r\n      let cardToAdd = cards.all.find(\r\n        (cardVal, cardInd) => {\r\n          return cardVal.suit == card.suit && cardVal.rank == card.rank;\r\n        }\r\n      );\r\n      myhand.addCard(cardToAdd);\r\n    }\r\n\r\n    //adding cards in the discard pile\r\n    for (let card of data.discardPile) {\r\n      discardPile.addCard(cards.all.find((cardVal, cardInd) => cardVal.suit == card.suit && cardVal.rank == card.rank));\r\n    }\r\n\r\n    //fill ophand with fake cards\r\n    for (let i = 0; i < data.opcards; i++) {\r\n      ophand.addCard(cards.getFakeCards());\r\n    }\r\n\r\n    //adding melds\r\n    for (let meld of data.melds) {\r\n      //adding the cards in the current meld \r\n      let meldArr = [];\r\n      for (let card of meld) {\r\n        let cardToAdd = cards.all.find(\r\n          (cardVal, cardInd) => {\r\n            return cardVal.suit == card.suit && cardVal.rank == card.rank;\r\n          });\r\n        meldArr.push(cardToAdd);\r\n      }\r\n\r\n      let newMeld = new cards.Hand({ faceUp: true, y: 1 });\r\n\r\n      const length = meldArr.length;\r\n      for (let i = 0; i < length; i++) {\r\n        let card = meldArr.pop();\r\n        newMeld.addCard(card);\r\n      }\r\n      newMeld.sort();\r\n      newMeld.x = newMeld.x - 230;\r\n      newMeld.y = newMeld.y + (meldPile.length + 1) * 250 / 5;\r\n\r\n      let self = this;\r\n      newMeld.click(function (card) {\r\n        if (self.state.isAddingToMeld) {\r\n          self.setState({ currentSelectedMeld: newMeld }, () => self.handleAddToMeld());\r\n        }\r\n      });\r\n\r\n      meldPile.push(newMeld);\r\n      newMeld.resize(\"small\");\r\n      newMeld.render();\r\n    }\r\n    //now, render everything\r\n    deck.render();\r\n    discardPile.render();\r\n    myhand.render();\r\n    ophand.render();\r\n\r\n    if (data.myturn) {\r\n      //if it is my turn\r\n      if (data.drawPhase) {\r\n        //drawing stage\r\n        this.setGameState(\"isDrawing\");\r\n      } else {\r\n        this.setGameState(\"isDiscarding\", { hasDrawn: true });\r\n      }\r\n    }\r\n    else {\r\n      this.setGameState(\"isWaiting\");\r\n    }\r\n  }\r\n\r\n  //server has accepted the request to add card to meld, now move the card to meld\r\n  moveCardToMeld(data) {\r\n    let cardToMoveToMeld = data.card;\r\n    let { currentMeld, myhand, ophand, deck, meldPile } = this.state;\r\n    //i am doing the adding\r\n    if (data.player == 'me') {\r\n      let { currentSelectedMeld } = this.state;\r\n      //make sure the card that server says to add is the same that the client request to add\r\n      if (cardToMoveToMeld.rank == currentMeld[0].rank && cardToMoveToMeld.suit == currentMeld[0].suit) {\r\n        // let cardToAddToMeld = currentMeld.pop();\r\n        currentSelectedMeld.addCard(currentMeld.topCard());\r\n        // currentMeld.removeCard(cardToAddToMeld);\r\n      } else {\r\n        //for some reason, the client card and server's card is not the same, ignore client card\r\n\r\n        this.cancelMeldOrAddToMeld();\r\n        //move cards from myhand to the meld that needs adding\r\n\r\n        //the card in local game\r\n        let card = myhand.find((cardVal) => cardVal.rank == cardToMoveToMeld.rank && cardVal.rank == cardToMoveToMeld.rank);\r\n        currentSelectedMeld.addCard(card);\r\n        // myhand.removeCard(card);\r\n      }\r\n      this.setState({ currentSelectedCardHand: null, currentSelectedMeld: null }, () => setTimeout(() => this.setGameState(\"isDiscarding\"), 500));//avoid race condition with myhand.click event\r\n      currentSelectedMeld.sort();\r\n      currentSelectedMeld.resize(\"small\");\r\n      currentSelectedMeld.render();\r\n      currentMeld.render();\r\n      ophand.render();\r\n      myhand.render();\r\n    }\r\n    else {\r\n      //the opponent is doing the adding\r\n      //assume that ophand has only fake cards, any card ophand drew is actually in deck\r\n\r\n      //the card in local game\r\n      let card = deck.find((cardVal) => cardVal.suit == cardToMoveToMeld.suit && cardVal.rank == cardToMoveToMeld.rank);\r\n\r\n      $(ophand.topCard().el).hide();\r\n      ophand.removeCard(ophand.topCard());\r\n      // ophand.render({ immediate: true });\r\n      \r\n      ophand.addCard(card);\r\n      //avoid rendering\r\n      ophand.render({ immediate: true });\r\n      deck.render({ immediate: true });\r\n\r\n      let meldToAdd = meldPile[data.meldId];\r\n      //move cards from ophand to currentSelectedMeld\r\n      meldToAdd.addCard(ophand.topCard());\r\n      // ophand.removeCard(card);\r\n\r\n      //render\r\n      meldToAdd.sort();\r\n      meldToAdd.resize(\"small\");\r\n      meldToAdd.render();\r\n      ophand.render();\r\n    }\r\n  }\r\n\r\n  //handle add a card to meld on client side, if the card is valid then it is sent to server\r\n  handleAddToMeld() {\r\n    let { isAddingToMeld, currentMeld, myhand, currentSelectedCardHand, currentSelectedMeld } = this.state;\r\n    if (isAddingToMeld) {\r\n      //reuse currentMeld to store the card to add\r\n      //in this usage, currentMeld should have only 1 card\r\n      if (currentMeld.length === 0) {\r\n        //no card yet\r\n        currentMeld.addCard(currentSelectedCardHand);\r\n        myhand.removeCard(currentSelectedCardHand);\r\n        currentMeld.sort();\r\n        myhand.render();\r\n        currentMeld.render();\r\n      } else if (currentMeld.length === 1) {\r\n        if (currentSelectedMeld != null) {\r\n          let card = currentMeld[0];//the only card inside currentMeld\r\n          //check if card to add to meld is valid for currentSelectedMeld\r\n          if ((currentSelectedMeld[0].suit === card.suit && currentSelectedMeld[0].rank - 1 === card.rank)\r\n            || (currentSelectedMeld[currentSelectedMeld.length - 1].suit === card.suit && currentSelectedMeld[currentSelectedMeld.length - 1].rank + 1 === card.rank)\r\n            || (currentSelectedMeld[0].suit != card.suit && currentSelectedMeld[0].rank == card.rank \r\n            && currentSelectedMeld[1].rank == card.rank\r\n            && currentSelectedMeld[2].rank == card.rank)\r\n          ) {\r\n            //if the card is same suit and less than 1 from the first card in meld, or greater than 1 from the last card in meld\r\n            this.sendWSData({\r\n              cmd: \"addmeld\",\r\n              card: {\r\n                suit: card.suit,\r\n                rank: card.rank\r\n              },\r\n              meldId: currentSelectedMeld.id\r\n            });\r\n          }\r\n          else alert(\"Cannot add this card into this meld\");\r\n\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  //this function handles melding process client side only, it does not move cards into the meld pile\r\n  handleMeld() {\r\n    let validMeld = false;\r\n    let { cards, myhand, currentMeld, meldPile } = this.state;\r\n    let card = this.state.currentSelectedCardHand;\r\n\r\n    //if there are less then 3 cards, just add them to currentMeld\r\n    if (currentMeld.length < 2) {\r\n      currentMeld.addCard(card);\r\n      myhand.removeCard(card);\r\n      currentMeld.sort();\r\n      myhand.render();\r\n      currentMeld.render();\r\n    }\r\n    else if (currentMeld.length == 2) {\r\n      //currentMeld has 2 cards already, adding a third will perform a check\r\n      //if check is valid, add cards to the meld pile\r\n      currentMeld.addCard(card);\r\n      myhand.removeCard(card);\r\n      currentMeld.sort();\r\n      //three in a row, same suit\r\n      if (currentMeld[0].suit == currentMeld[1].suit && currentMeld[1].suit == currentMeld[2].suit) {\r\n        if (Math.abs(currentMeld[0].rank - currentMeld[1].rank) == 1\r\n          && Math.abs((currentMeld[1].rank - currentMeld[2].rank)) == 1) {\r\n          validMeld = true;\r\n        }\r\n      }\r\n      else {\r\n        //or three of same rank, diff suit\r\n        if ((currentMeld[0].rank) == currentMeld[1].rank && (currentMeld[1].rank) == currentMeld[2].rank) {\r\n          validMeld = true;\r\n        }\r\n      }\r\n      if (validMeld) {\r\n        //the meld is valid, send a cmd to meld to server\r\n        this.sendWSData({\r\n          cmd: \"newmeld\",\r\n          player: \"me\",\r\n          meld: currentMeld.map((card) => {\r\n            return { suit: card.suit, rank: card.rank };\r\n          })//array with 3 cards\r\n        });\r\n      }\r\n      else {\r\n        alert(\"meld not valid\");\r\n      }\r\n      myhand.render();\r\n      currentMeld.render();\r\n    }\r\n  }\r\n\r\n  moveMeldToPile(data) {\r\n    let { cards, meldPile, currentMeld, myhand, ophand, deck } = this.state;\r\n    let meldToMove = data.meld; //this is the meld given by server; currentMeld is the local meld\r\n    let newMeld = new cards.Hand({ faceUp: true, y: 1 });\r\n\r\n    //i am doing the melding\r\n    if (data.player == 'me') {\r\n      let isCurrentMeldValid = true;\r\n      //make sure the meld that we are moving to the meld pile is the same as the meld the client has chosen\r\n      if (meldToMove.length === currentMeld.length) {\r\n        for (let i = 0; i < meldToMove.length; i++) {\r\n          if (!currentMeld.some((cardVal) => cardVal.rank == meldToMove[i].rank && cardVal.suit == meldToMove[i].suit)) {\r\n            //if a card in meldToMove not exist in currentMeld, then currentMeld is invalid\r\n            isCurrentMeldValid = false;\r\n            break;\r\n          }\r\n        }\r\n      } else {\r\n        isCurrentMeldValid = false;\r\n      }\r\n\r\n      //this should not happen, unless something weird happens with the server or the player cheated somehow\r\n      if (!isCurrentMeldValid) {\r\n        //ignore currentMeld and use meldToMove instead\r\n        //cancel the currentMeld\r\n        this.cancelMeldOrAddToMeld();\r\n        //move cards from myhand to the meldPile\r\n        let length = meldToMove.length;\r\n        for (let i = 0; i < length; i++) {\r\n          let card = myhand.pop();\r\n          newMeld.addCard(card);\r\n          currentMeld.removeCard(card);\r\n        }\r\n      } else {\r\n        //the normal, expected flow\r\n        let length = meldToMove.length;\r\n        for (let i = 0; i < length; i++) {\r\n          let card = currentMeld.pop();\r\n          newMeld.addCard(card);\r\n          currentMeld.removeCard(card);\r\n          //add id of the meld to newMeld, this is useful when adding a card to a meld\r\n        }\r\n      }\r\n      this.setState({ currentSelectedCardHand: null }, () => setTimeout(() => this.setGameState(\"isDiscarding\"), 500));//avoid race condition with myhand.click event\r\n\r\n    }\r\n    //the other player is doing the melding\r\n    else if (data.player == \"op\") {\r\n      //assume that ophand has only fake cards, any card ophand drew is actually in deck\r\n\r\n      //remove 3 cards from ophand\r\n      for (let i = 0; i < meldToMove.length; i++) {\r\n        $(ophand.topCard().el).hide()\r\n        ophand.removeCard(ophand.topCard());\r\n        ophand.render({ immediate: true });\r\n      }\r\n\r\n      //add cards from deck to ophand\r\n      for (let i = 0; i < meldToMove.length; i++) {\r\n        ophand.addCard(deck.find((cardVal) => cardVal.suit == meldToMove[i].suit && cardVal.rank == meldToMove[i].rank));\r\n      }\r\n      //avoid rendering\r\n      ophand.render({ immediate: true });\r\n      deck.render({ immediate: true });\r\n\r\n      //move cards from ophand to newMeld\r\n      for (let i = 0; i < meldToMove.length; i++) {\r\n        newMeld.addCard(ophand.topCard());\r\n      }\r\n    }\r\n    //sort the card without rendering\r\n    newMeld.sort();\r\n    newMeld.render({ immediate: true });\r\n\r\n    newMeld.x = newMeld.x - 230;\r\n    newMeld.y = newMeld.y + (meldPile.length + 1) * 250 / 5;\r\n\r\n    let self = this;\r\n    newMeld.id = data.meldId;\r\n    newMeld.click(function (card) {\r\n      if (self.state.isAddingToMeld) {\r\n        self.setState({ currentSelectedMeld: newMeld }, () => self.handleAddToMeld());\r\n      }\r\n    });\r\n\r\n    meldPile.push(newMeld);\r\n    newMeld.resize(\"small\");\r\n    newMeld.render();\r\n    currentMeld.render();\r\n  }\r\n\r\n  render() {\r\n    const { hasGameStarted } = this.props;\r\n    const { isMelding, hasDiscarded, hasDrawn, isWaiting, \r\n      isAddingToMeld, hint, winner, gamedraw, \r\n      score, hasGameEnded, lobbycode, history } = this.state;\r\n    const disableAddToMeldButton = () => {\r\n      if (isWaiting) {\r\n        return true;\r\n      } else if (isMelding || isAddingToMeld) {\r\n        //or melding/AddToMeld is in progress\r\n        return true;\r\n      }\r\n      else if (hasDrawn && !hasDiscarded) {\r\n        //if user has drawn a card but has not discard a card yet\r\n        return false;\r\n      }\r\n      return true;\r\n    };\r\n\r\n    return (\r\n      <div>\r\n        <div id=\"history_list\">\r\n          {makeHistory(history)}\r\n        </div>\r\n        <p>Welcome to the game</p>\r\n        <p><Link to=\"/stats\">View your stats</Link> </p>\r\n        <div id=\"hint\">\r\n          {hasGameStarted && !hasGameEnded ? hint : null}\r\n        </div>\r\n        <div id=\"lobbycode\">\r\n          <label style={{ display: !hasGameStarted ? \"inline\" : \"none\" }}>Enter a room code (must contains between 5 and 12 alphanumeric characters): &nbsp;&nbsp;\r\n          <input style={{ display: !hasGameStarted ? \"inline\" : \"none\" }}\r\n              value={lobbycode} onChange={this.handleLobbyCode}\r\n              type=\"text\" placeholder=\"Room code\" />\r\n          </label>\r\n        </div>\r\n\r\n        <button id=\"start-btn\" style={{ display: !hasGameStarted ? \"block\" : \"none\" }}\r\n          onClick={this.startGame}>Start the game</button>\r\n        {\r\n          hasGameEnded ? \r\n            <div id=\"game-winner\">\r\n              {gamedraw ? \r\n                <h1>The deck is out of cards. The game is a draw.</h1>\r\n                :\r\n                <React.Fragment>\r\n                  <h1>{winner ? \"You have won\" : \"You have lost\"}</h1>\r\n                  <h2>{winner ? \"Your score: \" : \"Your opponent score: \"} {score}</h2>\r\n                </React.Fragment>\r\n              }\r\n              \r\n              <button id=\"replay\" onClick={() => window.location.reload()}>Play another game</button>\r\n            </div>\r\n            : \r\n            <div id=\"card-table\">\r\n              <button disabled={disableAddToMeldButton()} style={{ display: hasGameStarted ? \"block\" : \"none\" }}\r\n                id=\"meld\"\r\n                onClick={() => this.setGameState(\"isMelding\")}\r\n              >Meld</button>\r\n\r\n              <button disabled={disableAddToMeldButton()} style={{ display: hasGameStarted ? \"block\" : \"none\" }}\r\n                id=\"addtomeld\"\r\n                onClick={() => this.setGameState(\"isAddingToMeld\")}\r\n              >Add to meld</button>\r\n\r\n              <button style={{ display: hasGameStarted & (isMelding || isAddingToMeld) ? \"block\" : \"none\" }}\r\n                id=\"cancel-meld\" onClick={this.cancelMeldOrAddToMeld}\r\n              >Cancel</button>\r\n\r\n              <button style={{ display: hasGameStarted ? \"block\" : \"none\" }}\r\n                id=\"sort-hand\" onClick={this.sortHand}\r\n              >Sort hand</button>\r\n            </div>\r\n        }\r\n        \r\n\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n","import React, { Component } from 'react';\r\nimport { ContextConsumer } from '../context';\r\nimport {\r\n  Link\r\n} from \"react-router-dom\";\r\n\r\nconst Default = ({ handleInputUsername, handleInputPassword, username, password, signin }) => {\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div>\r\n        <h1>404 not found</h1>\r\n        <Link to=\"/\">Back to main page</Link>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default Default;","const SERVER_URL = \"https://localhost:3000\";\r\n\r\nconst SERVER_API = {\r\n  SIGNIN: \"/user/signin\",\r\n  SIGNUP: \"/user/signup\",\r\n  SIGNOUT: \"/signout\",\r\n  TOKENCHECK: \"/user/checkJWTToken\"\r\n}\r\n\r\nexport { SERVER_URL, SERVER_API}","import {SERVER_URL, SERVER_API} from '../../constants';\r\n\r\nasync function getServerMessage() {\r\n  try {\r\n    let response = await fetch(\"https://localhost:3000/welcome\", {\r\n      method: \"GET\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        \"Access-Control-Allow-Origin\": \"*\"\r\n      }\r\n    });\r\n    // console.log(response);\r\n    let responseJSON = await response.json();\r\n    // console.log(responseJSON)\r\n    return responseJSON;\r\n} \r\ncatch (error) {\r\n    throw error;\r\n  }\r\n}\r\n\r\nasync function signin(username, password){\r\n  try {\r\n    let response = await fetch(SERVER_URL + SERVER_API.SIGNIN, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Accept: \"application/json\",\r\n        \"Access-Control-Allow-Origin\": \"*\"\r\n      },\r\n      body: JSON.stringify({\r\n        username: username,\r\n        password: password\r\n      })\r\n    });\r\n    let responseJSON = await response.json();\r\n    if (response.status !== 200 && response.ok === false) {\r\n      throw new Error(responseJSON.err.message);\r\n    } else {\r\n      return responseJSON;\r\n    }\r\n  } catch (error) {\r\n    throw error;\r\n  }\r\n}\r\n\r\nasync function signup(username, password) {\r\n  try {\r\n    let response = await fetch(SERVER_URL + SERVER_API.SIGNUP, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Accept: \"application/json\",\r\n        \"Access-Control-Allow-Origin\": \"*\"\r\n      },\r\n      body: JSON.stringify({\r\n        username: username,\r\n        password: password\r\n      })\r\n    });\r\n    let responseJSON = await response.json();\r\n    if (response.status != 200 && response.ok == false) {\r\n      throw new Error(responseJSON.err.message);\r\n    } else {\r\n      return responseJSON;\r\n    }\r\n  } catch (error) {\r\n    throw error;\r\n  }\r\n}\r\n\r\nasync function checkSession(sessionToken) {\r\n  try {\r\n    let response = await fetch(SERVER_URL + SERVER_API.TOKENCHECK, {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Accept: \"application/json\",\r\n        \"Access-Control-Allow-Origin\": \"*\",\r\n        Authorization: \"Bearer \" + sessionToken\r\n      }\r\n    });\r\n    let responseJSON = await response.json();\r\n    if (responseJSON.success == false && responseJSON.status == \"JWT invalid\") {\r\n      return null;\r\n    } else {\r\n      return responseJSON.user;\r\n    }\r\n  } catch (error) {\r\n    throw error;\r\n  }\r\n}\r\n\r\nexport { signin, signup, checkSession }","import React, { Component } from 'react';\r\nimport { ContextConsumer } from '../context';\r\nimport {\r\n  Link\r\n} from \"react-router-dom\";\r\nimport { makeHistory } from \"./helper\";\r\nimport { checkSession } from \"./API/account\";\r\n\r\n\r\nexport default class Stats extends Component {\r\n  async componentDidMount(){\r\n    let userInfo = await checkSession(this.props.userToken);\r\n    this.props.updateUserInfo(userInfo);\r\n  }\r\n\r\n  render() {\r\n    let { user } = this.props;\r\n    let history = [];\r\n    for (let i = 0; i < user.gameHistory.length; i++) {\r\n      history.push(JSON.parse(user.gameHistory[i]));\r\n    }\r\n    return (\r\n      <ContextConsumer>\r\n        {value =>\r\n          <div className=\"container\">\r\n            <div className=\"row\">\r\n              <div>\r\n                <h2>Hello {user.username}</h2>\r\n                <h6>You have played {user.gamePlayed} games</h6>\r\n                <h6>You have won {user.gameWon} games</h6>\r\n                <h6>You have lost {user.gameLost} games</h6>\r\n                <h6>{user.gameDraw} games ended in a draw</h6>\r\n                <br />\r\n              </div>\r\n            </div>\r\n            <div className=\"row\">\r\n              <Link to=\"/game\">Back to game</Link>\r\n            </div>\r\n            <br />\r\n            <h4>Your previous game histories</h4>\r\n            <div className=\"row\">\r\n              {history.map((game, ind) => {\r\n                return <div key={ind} className=\"col\">\r\n                  {makeHistory(game)};\r\n              </div>;\r\n              })}\r\n\r\n            </div>\r\n          </div>\r\n        }\r\n      </ContextConsumer>\r\n    );\r\n  }\r\n};","import React, { Component } from 'react';\nimport { ContextProvider } from \"./js/context\";\nimport './App.css';\nimport \"bootstrap/dist/css/bootstrap.css\";\n\nimport Signin from \"./js/components/Signin\";\nimport Signup from './js/components/Signup';\nimport AuthRoute from \"./js/components/AuthRoute\";\nimport Game from \"./js/components/Game\";\nimport DefaultRoute from \"./js/components/Default\";\n\nimport { signin, signup, checkSession } from './js/components/API/account';\n\nimport {\n  BrowserRouter,\n  Switch,\n  Route,\n  Link\n} from \"react-router-dom\";\nimport Stats from \"./js/components/Stats\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      message: \"Hello from context store\",\n      errorMsg: \"\",\n      username: \"\",\n      password: \"\",\n      user: null,\n      userToken: \"\",\n      hasGameStarted: false,\n      websocket: null,\n      isFinishedLoading: false\n    };\n    this.toggleLoading = this.toggleLoading.bind(this);\n    this.signin = this.signin.bind(this);\n    this.signup = this.signup.bind(this);\n    this.handleInputUsername = this.handleInputUsername.bind(this);\n    this.handleInputPassword = this.handleInputPassword.bind(this);\n    this.setErrorMessage = this.setErrorMessage.bind(this);\n    this.startingGame = this.startingGame.bind(this);\n    this.validateUsernamePassword = this.validateUsernamePassword.bind(this);\n    this.updateUserInfo = this.updateUserInfo.bind(this);\n\n  } \n\n  updateUserInfo(userInfo){\n    this.setState({\n      user: {\n        ...this.state.user,\n        gameWon: userInfo.gameWon,\n        gameLost: userInfo.gameLost,\n        gamePlayed: userInfo.gamePlayed,\n        gameHistory: userInfo.gameHistory,\n        gameDraw: userInfo.gameDraw\n      }\n    })\n  }\n\n  async componentDidMount() {\n    \n    //setup websocket\n    let serverWebsocketURL = process.env.WSS || \"wss://localhost:3000\";\n    // this.setState({ websocket: new WebSocket(serverWebsocketURL) });\n\n    try {\n      //check if game state still valid\n      let localstate = JSON.parse(localStorage.getItem(\"appState\"));\n      // console.log(\"localstate\", localstate);\n      if (localstate) {\n        //if local game state exist\n        //assume that local game state only exist if the user has signin/signup before\n        let userInfo = await checkSession(localstate.userToken);\n        if (userInfo!=null) {\n          this.setState({\n            user: localstate.user,\n            username: localstate.username,\n            userToken: localstate.userToken\n          });\n        }\n        else {\n          //token is no longer valid, delete localStorage\n          localStorage.clear();\n        }\n\n      }\n      this.setState({\n        isFinishedLoading: true,\n        websocket: new WebSocket(serverWebsocketURL)\n      });\n\n    } catch (error) {\n      // console.log(error);\n      this.setState({\n        isFinishedLoading: true,\n        errorMsg: \"Cannot check user's token. Please signin again.\"\n      });\n    }\n\n  }\n\n  componentWillUnmount() {\n    if (this.state.websocket) {\n      this.state.websocket.close();\n    }\n  }\n\n  startingGame() {\n    //assume user has signin or signup\n    this.setState({\n      hasGameStarted: true\n    });\n\n  }\n  handleInputUsername(event) {\n    this.setState({ username: event.target.value });\n  }\n\n  handleInputPassword(event) {\n    this.setState({ password: event.target.value });\n  }\n  setErrorMessage(message) {\n    // throw Error(message);\n    this.setState({ errorMsg: message });\n  }\n\n  validateUsernamePassword(){\n    const {username, password} = this.state;\n    //username length must be between 3 and 50\n    let passwordRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&_])[A-Za-z\\d@$!%*?&_]{8,20}$/;\n    let usernameRegex = /^[A-Za-z\\d@._]{3,50}$/;\n    if (!usernameRegex.test(username) || !passwordRegex.test(password) ){\n      return false;\n    }\n    return true;\n\n  }\n  async signin() {\n    this.setState({ isLoading: true, errorMsg: \"\" });\n    if (this.validateUsernamePassword()) {\n      try {\n        //message will be a userToken, save it\n        let response = await signin(this.state.username, this.state.password);\n        this.setState({\n          userToken: response.token,\n          user: response.user\n        });\n\n        //save user's info\n        localStorage.setItem(\"appState\", JSON.stringify({\n          username: this.state.username,\n          user: this.state.user,\n          userToken: this.state.userToken,\n        }));\n\n\n      } catch (error) {\n        this.setErrorMessage(error.message);\n      } finally {\n        this.setState({ isLoading: false });\n      }\n    }\n    else {\n      this.setErrorMessage(\"Username or password is invalid. Please try again.\");\n    }\n  }\n\n  async signup() {\n    this.setState({ isLoading: true, errorMsg: \"\" });\n    if (this.validateUsernamePassword()){\n      try {\n        //message will be a userToken, save it\n        let response = await signup(this.state.username, this.state.password);\n\n        this.setState({\n          userToken: response.token,\n          user: response.user,\n        });\n\n        //save user's info\n        localStorage.setItem(\"appState\", JSON.stringify({\n          username: this.state.username,\n          user: this.state.user,\n          userToken: this.state.userToken,\n        }));\n\n      } catch (error) {\n        this.setErrorMessage(error.message);\n      } finally {\n        this.setState({ isLoading: false });\n      }\n    }\n    else {\n      this.setErrorMessage(\"Username or password is invalid. Please try again.\");\n    }\n  }\n\n  toggleLoading() {\n    //toggle the spinning icon \n  }\n  render() {\n    const { errorMsg, username, password, user, userToken, hasGameStarted, websocket, isFinishedLoading } = this.state;\n    const isSignedIn = user !== null && userToken !== \"\";\n    return (\n      <BrowserRouter>\n        <ContextProvider value={this.state}>\n          <div className=\"App\">\n            {\n              isFinishedLoading ?\n                <div>\n                  <div className=\"error-message\">\n                    {errorMsg ? errorMsg : null}\n\n                  </div>\n                  <Switch>\n                    <AuthRoute isSignedIn={isSignedIn} type=\"guest\" path=\"/signup\">\n                      <Signup signup={this.signup} handleInputUsername={this.handleInputUsername}\n                        handleInputPassword={this.handleInputPassword}\n                        username={username} password={password} />\n                    </AuthRoute>\n\n                    {websocket != null ?\n                      <AuthRoute isSignedIn={isSignedIn} type=\"private\" path=\"/game\">\n                        <Game hasGameStarted={hasGameStarted}\n                          startingGame={this.startingGame}\n                          setErrorMessage={this.setErrorMessage}\n                          websocket={websocket}\n                          userToken={userToken}\n                          user={user}\n                        />\n                      </AuthRoute>\n                      : null\n                    }\n\n                    {user != null ?\n                      <AuthRoute isSignedIn={isSignedIn} type=\"private\" path=\"/stats\">\n                        <Stats \n                          user={user}\n                          userToken={userToken}\n                          updateUserInfo={this.updateUserInfo}\n                        />\n                      </AuthRoute>\n                      : null\n                    }\n\n                    <AuthRoute isSignedIn={isSignedIn} type=\"guest\" path=\"/\" exact>\n                      <Signin signin={this.signin} handleInputUsername={this.handleInputUsername}\n                        handleInputPassword={this.handleInputPassword}\n                        username={username} password={password} />\n                    </AuthRoute>\n\n                    <DefaultRoute/>\n                  </Switch>\n                </div>\n                : <p>Is Loading</p>\n            }\n\n          </div>\n        </ContextProvider>\n      </BrowserRouter>\n    );\n  }\n\n}\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}