(this["webpackJsonprummy-client"]=this["webpackJsonprummy-client"]||[]).push([[0],{22:function(e,t,a){e.exports=a(36)},27:function(e,t,a){},29:function(e,t,a){},36:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(19),l=a.n(s),i=(a(27),a(3)),c=a.n(i),o=a(6),u=a(9),m=a(10),p=a(5),h=a(11),d=a(12),v=a(21),g=r.a.createContext(),E=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){return Object(u.a)(this,a),t.call(this,e)}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement(g.Provider,{value:Object(v.a)({},this.props.value)},this.props.children)}}]),a}(n.Component),w=g.Consumer,f=(a(29),a(30),a(7)),b=function(e){var t=e.handleInputUsername,a=e.handleInputPassword,n=e.username,s=e.password,l=e.signin,i=function(e){e.preventDefault(),l()};return r.a.createElement(w,null,(function(e){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("h1",null,"Welcome to Rummy")),r.a.createElement("div",{className:"row"},r.a.createElement("h2",null,"Signin")),r.a.createElement("div",{className:"row"},r.a.createElement("form",null,r.a.createElement("div",{className:"row w-100"},r.a.createElement("label",{htmlFor:"username"},"Username: \xa0",r.a.createElement("input",{maxLength:50,type:"text",name:"username",value:n,onChange:t})),r.a.createElement("br",null)),r.a.createElement("div",{className:"row w-100"},r.a.createElement("label",{htmlFor:"username"},"Password: \xa0",r.a.createElement("input",{maxLength:50,type:"password",name:"password",value:s,onChange:a})),r.a.createElement("br",null)),r.a.createElement("div",{className:"row"},r.a.createElement("input",{type:"submit",value:"Signin",onClick:i})))),r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h4",null,"Don't have an account yet?"),r.a.createElement(f.b,{to:"/signup"},"Click here")))}))},y=function(e){var t=e.handleInputUsername,a=e.handleInputPassword,n=e.username,s=e.password,l=e.signup,i=function(e){e.preventDefault(),l()};return r.a.createElement(w,null,(function(e){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("h1",null,"Welcome to Rummy")),r.a.createElement("div",{className:"row"},r.a.createElement("h2",null,"Signup")),r.a.createElement("div",{className:"row"},r.a.createElement("form",null,r.a.createElement("div",{className:"row w-100"},r.a.createElement("label",{htmlFor:"username"},"Username: \xa0",r.a.createElement("input",{minLength:3,maxLength:50,type:"text",name:"username",value:n,onChange:t})),r.a.createElement("br",null)),r.a.createElement("div",{className:"row w-100"},r.a.createElement("label",{htmlFor:"username"},"Password: \xa0",r.a.createElement("input",{minLength:5,maxLength:50,type:"password",name:"password",value:s,onChange:a})),r.a.createElement("br",null)),r.a.createElement("div",{className:"row"},r.a.createElement("input",{type:"submit",value:"Signup",onClick:i})))),r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h4",null,"Already have an account?"),r.a.createElement(f.b,{to:"/"},"Click here")))}))},k=a(1),x=function(e){var t=e.isSignedIn,a=e.type;return"guest"===a&&t?r.a.createElement(k.a,{to:"/game"}):"private"!==a||t?r.a.createElement(k.b,e):r.a.createElement(k.a,{to:"/"})},j=function(e){return r.a.createElement("div",null,r.a.createElement("p",null,"Welcome to the game"))},O="https://localhost:3000",I="/user/signin",S="/user/signup";function N(e,t){return C.apply(this,arguments)}function C(){return(C=Object(o.a)(c.a.mark((function e(t,a){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(O+I,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({username:t,password:a})});case 3:return n=e.sent,e.next=6,n.json();case 6:if(r=e.sent,200===n.status||!1!==n.ok){e.next=11;break}throw new Error(r.err.message);case 11:return e.abrupt("return",r);case 12:e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}function P(e,t){return L.apply(this,arguments)}function L(){return(L=Object(o.a)(c.a.mark((function e(t,a){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(O+S,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({username:t,password:a})});case 3:return n=e.sent,e.next=6,n.json();case 6:if(r=e.sent,200==n.status||0!=n.ok){e.next=11;break}throw new Error(r.err.message);case 11:return e.abrupt("return",r);case 12:e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}var M=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={message:"Hello from context store",errorMsg:"",token:"",username:"",password:"",user:null},n.toggleLoading=n.toggleLoading.bind(Object(p.a)(n)),n.signin=n.signin.bind(Object(p.a)(n)),n.signup=n.signup.bind(Object(p.a)(n)),n.validate=n.validate.bind(Object(p.a)(n)),n.handleInputUsername=n.handleInputUsername.bind(Object(p.a)(n)),n.handleInputPassword=n.handleInputPassword.bind(Object(p.a)(n)),n.setErrorMessage=n.setErrorMessage.bind(Object(p.a)(n)),n}return Object(m.a)(a,[{key:"handleInputUsername",value:function(e){this.setState({username:e.target.value})}},{key:"handleInputPassword",value:function(e){this.setState({password:e.target.value})}},{key:"setErrorMessage",value:function(e){this.setState({errorMsg:e})}},{key:"signin",value:function(){var e=Object(o.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({isLoading:!0,errorMsg:""}),e.prev=1,this.validate()){e.next=5;break}return this.setErrorMessage("Username or password is invalid. Please try again."),e.abrupt("return");case 5:return e.next=7,N(this.state.username,this.state.password);case 7:t=e.sent,this.setState({token:t.token,user:t.user}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),this.setErrorMessage(e.t0.message);case 14:return e.prev=14,this.setState({isLoading:!1}),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"signup",value:function(){var e=Object(o.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({isLoading:!0,errorMsg:""}),e.prev=1,this.validate()){e.next=5;break}return this.setErrorMessage("Username or password is invalid. Please try again."),e.abrupt("return");case 5:return e.next=7,P(this.state.username,this.state.password);case 7:t=e.sent,this.setState({token:t.token,user:t.user}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),this.setErrorMessage(e.t0.message);case 14:return e.prev=14,this.setState({isLoading:!1}),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"validate",value:function(){var e=this.state,t=e.username,a=e.password;return!(t.length>50||a.length>50)}},{key:"toggleLoading",value:function(){}},{key:"render",value:function(){var e=this.state,t=e.errorMsg,a=e.username,n=e.password,s=e.user,l=e.token,i=null!==s&&""!==l;return r.a.createElement(f.a,null,r.a.createElement(E,{value:this.state},r.a.createElement("div",{className:"App container d-flex h-100"},r.a.createElement("div",{className:"row error-message"},t||null),r.a.createElement(k.d,null,r.a.createElement(x,{isSignedIn:i,type:"guest",path:"/signup"},r.a.createElement(y,{signup:this.signup,handleInputUsername:this.handleInputUsername,handleInputPassword:this.handleInputPassword,username:a,password:n})),r.a.createElement(x,{isSignedIn:i,type:"private",path:"/game"},r.a.createElement(j,null)),r.a.createElement(x,{isSignedIn:i,type:"guest",path:"/"},r.a.createElement(b,{signin:this.signin,handleInputUsername:this.handleInputUsername,handleInputPassword:this.handleInputPassword,username:a,password:n}))))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[22,1,2]]]);
//# sourceMappingURL=main.d88fcc86.chunk.js.map